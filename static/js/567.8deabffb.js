"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[567],{7827:function(e,a,o){o.r(a),o.d(a,{default:function(){return ue}});var s=o(3396),c=o(7139),l=o.p+"static/img/qr.debe6426.jpg";const n=e=>((0,s.dD)("data-v-020efe80"),e=e(),(0,s.Cn)(),e),i={class:"login-section"},t={class:"wrapper"},r={key:1,class:"qrcode-box"},u=n((()=>(0,s._)("img",{src:l,alt:""},null,-1))),d=n((()=>(0,s._)("p",null,[(0,s.Uk)("打开 "),(0,s._)("a",{href:"javascript:;"},"小兔鲜App"),(0,s.Uk)(" 扫码登录")],-1))),m=[u,d];function p(e,a,o,l,n,u){const d=(0,s.up)("LoginHeader"),p=(0,s.up)("LoginForm"),v=(0,s.up)("LoginFooter");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("欢迎登录")])),_:1}),(0,s._)("section",i,[(0,s._)("div",t,[(0,s._)("nav",null,[(0,s._)("a",{onClick:a[0]||(a[0]=e=>l.activeName="account"),class:(0,c.C_)({active:"account"===l.activeName}),href:"javascript:;"},"账户登录",2),(0,s._)("a",{onClick:a[1]||(a[1]=e=>l.activeName="qrcode"),class:(0,c.C_)({active:"qrcode"===l.activeName}),href:"javascript:;"},"扫码登录",2)]),"account"===l.activeName?((0,s.wg)(),(0,s.j4)(p,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)("表单")])),_:1})):(0,s.kq)("",!0),"qrcode"===l.activeName?((0,s.wg)(),(0,s.iD)("div",r,m)):(0,s.kq)("",!0)])]),(0,s.Wm)(v)],64)}var v=o(4870),g=o(7406),f=o(8867);const _=e=>((0,s.dD)("data-v-00fb575e"),e=e(),(0,s.Cn)(),e),w={class:"account-box"},k={class:"toggle"},b=_((()=>(0,s._)("i",{class:"iconfont icon-user"},null,-1))),h=_((()=>(0,s._)("i",{class:"iconfont icon-msg"},null,-1))),y={class:"form-item"},C={class:"input"},q=_((()=>(0,s._)("i",{class:"iconfont icon-user"},null,-1))),U={key:0,class:"error"},j=_((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),F={class:"form-item"},V={class:"input"},D=_((()=>(0,s._)("i",{class:"iconfont icon-lock"},null,-1))),L={key:0,class:"error"},A=_((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),x={class:"form-item"},Z={class:"input"},H=_((()=>(0,s._)("i",{class:"iconfont icon-user"},null,-1))),N={key:0,class:"error"},z=_((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),W={class:"form-item"},M={class:"input"},E=_((()=>(0,s._)("i",{class:"iconfont icon-code"},null,-1))),Y={key:0,class:"error"},$=_((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),I={class:"form-item"},R={class:"agree"},P=_((()=>(0,s._)("span",null,"我已同意",-1))),X=_((()=>(0,s._)("a",{href:"javascript:;"},"《隐私条款》",-1))),B=_((()=>(0,s._)("span",null,"和",-1))),G=_((()=>(0,s._)("a",{href:"javascript:;"},"《服务条款》",-1))),J={key:0,class:"error"},K=_((()=>(0,s._)("i",{class:"iconfont icon-warning"},null,-1))),O=(0,s.uE)('<div class="action" data-v-00fb575e><a href="https://graph.qq.com/oauth2.0/authorize?client_id=100556005&amp;response_type=token&amp;scope=all&amp;redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback" data-v-00fb575e><img src="https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png" alt="" data-v-00fb575e></a><div class="url" data-v-00fb575e><a href="javascript:;" data-v-00fb575e>忘记密码</a><a href="javascript:;" data-v-00fb575e>免费注册</a></div></div>',1);function Q(e,a,o,l,n,i){const t=(0,s.up)("Field"),r=(0,s.up)("Form");return(0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",k,[l.isMsgLogin?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:a[0]||(a[0]=e=>l.isMsgLogin=!1),href:"javascript:;"},[b,(0,s.Uk)(" 使用账号登录 ")])):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:a[1]||(a[1]=e=>l.isMsgLogin=!0),href:"javascript:;"},[h,(0,s.Uk)(" 使用短信登录 ")]))]),(0,s.Wm)(r,{class:"form",ref:"formCom","validation-schema":l.schema,autocomplete:"off"},{default:(0,s.w5)((({errors:e})=>[l.isMsgLogin?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("div",x,[(0,s._)("div",Z,[H,(0,s.Wm)(t,{type:"text",name:"mobile",class:(0,c.C_)({error:e.mobile}),modelValue:l.form.mobile,"onUpdate:modelValue":a[4]||(a[4]=e=>l.form.mobile=e),placeholder:"请输入手机号 测试号132 4105 1259"},null,8,["class","modelValue"])]),e.mobile?((0,s.wg)(),(0,s.iD)("div",N,[z,(0,s.Uk)((0,c.zw)(e.mobile),1)])):(0,s.kq)("",!0)]),(0,s._)("div",W,[(0,s._)("div",M,[E,(0,s.Wm)(t,{name:"code",type:"text",class:(0,c.C_)({error:e.code}),modelValue:l.form.code,"onUpdate:modelValue":a[5]||(a[5]=e=>l.form.code=e),placeholder:"验证码 测试123456"},null,8,["class","modelValue"]),(0,s._)("span",{class:"code",onClick:a[6]||(a[6]=(...e)=>l.send&&l.send(...e))},(0,c.zw)(0===l.time?"发送验证码":`${l.time}`),1)]),e.code?((0,s.wg)(),(0,s.iD)("div",Y,[$,(0,s.Uk)((0,c.zw)(e.code),1)])):(0,s.kq)("",!0)])],64)):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",y,[(0,s._)("div",C,[q,(0,s.Wm)(t,{name:"account",class:(0,c.C_)({error:e.account}),modelValue:l.form.account,"onUpdate:modelValue":a[2]||(a[2]=e=>l.form.account=e),type:"text",placeholder:"请输入用户名"},null,8,["class","modelValue"])]),e.account?((0,s.wg)(),(0,s.iD)("div",U,[j,(0,s.Uk)((0,c.zw)(e.account),1)])):(0,s.kq)("",!0)]),(0,s._)("div",F,[(0,s._)("div",V,[D,(0,s.Wm)(t,{name:"password",class:(0,c.C_)({error:e.password}),modelValue:l.form.password,"onUpdate:modelValue":a[3]||(a[3]=e=>l.form.password=e),type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),e.password?((0,s.wg)(),(0,s.iD)("div",L,[A,(0,s.Uk)((0,c.zw)(e.password),1)])):(0,s.kq)("",!0)])],64)),(0,s._)("div",I,[(0,s._)("div",R,[(0,s.Wm)(t,{as:"XtxCheckbox",name:"isAgree",modelValue:l.form.isAgree,"onUpdate:modelValue":a[7]||(a[7]=e=>l.form.isAgree=e)},null,8,["modelValue"]),P,X,B,G]),e.isAgree?((0,s.wg)(),(0,s.iD)("div",J,[K,(0,s.Uk)("点击同意")])):(0,s.kq)("",!0)]),(0,s._)("a",{href:"javascript:;",class:"btn",onClick:a[8]||(a[8]=(...e)=>l.login&&l.login(...e))},"登录")])),_:1},8,["validation-schema"]),O])}o(7658);var S=o(3430),T=o(5708),ee=o(2900),ae=o(2025),oe=o(2483),se=o(65),ce=(o(9716),{name:"LoginForm",components:{Form:T.l0,Field:T.gN},setup(){const e=(0,se.oR)(),a=(0,oe.tv)(),o=(0,oe.yj)(),{proxy:c}=(0,s.FN)(),l=(0,v.iH)(!1),n=(0,v.iH)(null),i=(0,v.qj)({isAgree:!0,account:null,password:null,mobile:null,code:null}),t={account:ae.Z.account,password:ae.Z.password,mobile:ae.Z.mobile,code:ae.Z.code,isAgree:ae.Z.isAgree};(0,s.YP)(l,(()=>{i.isAgree=!0,i.account=null,i.password=null,i.mobile=null,i.code=null,n.value.resetForm()}));const r=async()=>{const s=await n.value.validate();if(s){let s=null;try{if(l.value){const{mobile:e,code:a}=i;s=await(0,ee.EE)({mobile:e,code:a})}else{const{account:e,password:a}=i;s=await(0,ee.Ak)({account:e,password:a})}}catch(t){c.$message({type:"error",text:t.response.data.message}||"登陆失败")}console.log(s);const{id:n,account:r,nickname:u,avatar:d,token:m,mobile:p}=s.result;e.commit("user/setUser",{id:n,account:r,nickname:u,avatar:d,token:m,mobile:p}),e.dispatch("cart/mergeCart").then((()=>{c.$message({type:"success",text:"登录成功"}),a.push(o.query.redirectUrl||"/")}))}},u=(0,v.iH)(0),{pause:d,resume:m}=(0,S.Zv)((()=>{u.value--,u.value<=0&&d()}),1e3,!1),p=async()=>{const e=t.mobile(i.mobile);!0===e?0===u.value&&(await(0,ee.MM)(i.mobile),c.$message({type:"success",text:"发送成功"}),u.value=60,m()):n.value.setFieldError("mobile",e)};return{isMsgLogin:l,form:i,schema:t,formCom:n,login:r,send:p,time:u}}}),le=o(89);const ne=(0,le.Z)(ce,[["render",Q],["__scopeId","data-v-00fb575e"]]);var ie=ne,te={name:"Login",components:{LoginHeader:g.Z,LoginFooter:f.Z,LoginForm:ie},setup(){const e=(0,v.iH)("account");(0,oe.yj)(),(0,se.oR)();return{activeName:e}}};const re=(0,le.Z)(te,[["render",p],["__scopeId","data-v-020efe80"]]);var ue=re}}]);