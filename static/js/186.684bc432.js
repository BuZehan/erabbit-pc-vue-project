"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[186],{9546:function(e,o,s){s.d(o,{Z:function(){return g}});var a=s(3396),t=s(7139);const n={alt:""},l={class:"name ellipsis"},c={class:"desc ellipsis"},d={class:"price"};function i(e,o,s,i,u,r){const p=(0,a.up)("RouterLink"),g=(0,a.Q2)("lazy");return(0,a.wg)(),(0,a.j4)(p,{to:`/product/${s.goods.id}`,class:"goods-item"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("img",n,null,512),[[g,s.goods.picture]]),(0,a._)("p",l,(0,t.zw)(s.goods.name),1),(0,a._)("p",c,(0,t.zw)(s.goods.tag),1),(0,a._)("p",d,"¥"+(0,t.zw)(s.goods.price),1)])),_:1},8,["to"])}var u={name:"GoodsItem",props:{goods:Object,default:()=>{}}},r=s(89);const p=(0,r.Z)(u,[["render",i],["__scopeId","data-v-72126194"]]);var g=p},1186:function(e,o,s){s.r(o),s.d(o,{default:function(){return Be}});var a=s(3396),t=s(7139);const n=e=>((0,a.dD)("data-v-19c73052"),e=e(),(0,a.Cn)(),e),l={key:0,class:"xtx-goods-page"},c={class:"container"},d={class:"goods-info"},i={class:"media"},u={class:"spec"},r={class:"goods-footer"},p={class:"goods-article"},g=n((()=>(0,a._)("div",{class:"goods-warn"},null,-1))),v={class:"goods-aside"};function m(e,o,s,n,m,_){const f=(0,a.up)("XtxBreadItem"),w=(0,a.up)("XtxBread"),k=(0,a.up)("GoodsImage"),y=(0,a.up)("GoodsSales"),b=(0,a.up)("GoodsName"),h=(0,a.up)("GoodsSku"),C=(0,a.up)("XtxNumbox"),D=(0,a.up)("XtxButton"),I=(0,a.up)("GoodsRelevant"),G=(0,a.up)("GoodsTabs"),x=(0,a.up)("GoodsHot");return n.goods?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",c,[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(f,{to:"/category/"+n.goods.categories[0].id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(n.goods.categories[0].name),1)])),_:1},8,["to"]),(0,a.Wm)(f,{to:"/category/sub/"+n.goods.categories[1].id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(n.goods.categories[1].name),1)])),_:1},8,["to"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(n.goods.name),1)])),_:1})])),_:1}),(0,a._)("div",d,[(0,a._)("div",i,[(0,a.Wm)(k,{images:n.goods.mainPictures},null,8,["images"]),(0,a.Wm)(y)]),(0,a._)("div",u,[(0,a.Wm)(b,{goods:n.goods},null,8,["goods"]),(0,a.Wm)(h,{goods:n.goods,onChangeSku:n.changeSku},null,8,["goods","onChangeSku"]),(0,a.Wm)(C,{modelValue:n.num,"onUpdate:modelValue":o[0]||(o[0]=e=>n.num=e),max:n.goods.inventory,min:1,label:"数量"},null,8,["modelValue","max"]),(0,a.Wm)(D,{type:"primary",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("加入购物车")])),_:1})])]),(0,a.Wm)(I,{goodsId:n.goods.id},null,8,["goodsId"]),(0,a._)("div",r,[(0,a._)("div",p,[(0,a.Wm)(G),g]),(0,a._)("div",v,[(0,a.Wm)(x,{type:1}),(0,a.Wm)(x,{type:2})])])])])):(0,a.kq)("",!0)}const _=e=>((0,a.dD)("data-v-e496b284"),e=e(),(0,a.Cn)(),e),f={class:"goods-relevant"},w={class:"header"},k=_((()=>(0,a._)("i",{class:"icon"},null,-1))),y={class:"title"};function b(e,o,s,n,l,c){const d=(0,a.up)("XtxCarousel");return(0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("div",w,[k,(0,a._)("span",y,(0,t.zw)(s.goodsId?"同类商品推荐":"猜你喜欢"),1)]),(0,a.Wm)(d,{sliders:n.goodsArr,"auto-play":""},null,8,["sliders"])])}s(7658);var h=s(4870),C=s(4471);const D=e=>(0,C.Z)("/goods","get",{id:e}),I=({id:e,limit:o=16})=>(0,C.Z)("/goods/relevant","get",{id:e,limit:o}),G=({id:e,type:o,limit:s=3})=>(0,C.Z)("/goods/hot","get",{id:e,type:o,limit:s});var x={name:"GoodsRelevant",props:{goodsId:{type:String,default:""}},setup(e){const o=(0,h.iH)([]);return I(e.goodsId).then((e=>{const s=4,a=Math.ceil(e.result.length/s);for(let t=0;t<a;t++)o.value.push(e.result.slice(s*t,s*(t+1)))})),{goodsArr:o}}},H=s(89);const j=(0,H.Z)(x,[["render",b],["__scopeId","data-v-e496b284"]]);var z=j,S=s(9242);const W={class:"goods-image"},Z={class:"middle",ref:"target"},Y=["src"],N={class:"small"},P=["onMouseenter","src"];function X(e,o,s,n,l,c){return(0,a.wg)(),(0,a.iD)("div",W,[(0,a.wy)((0,a._)("div",{class:"large",style:(0,t.j5)([{backgroundImage:`url(${s.images[n.currIndex]})`},n.l_position])},null,4),[[S.F8,n.show]]),(0,a._)("div",Z,[(0,a._)("img",{src:s.images[n.currIndex],alt:""},null,8,Y),(0,a.wy)((0,a._)("div",{class:"layer",style:(0,t.j5)(n.m_position)},null,4),[[S.F8,n.show]])],512),(0,a._)("ul",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.images,((e,o)=>((0,a.wg)(),(0,a.iD)("li",{key:e,class:(0,t.C_)({active:o===n.currIndex})},[(0,a._)("img",{onMouseenter:e=>n.currIndex=o,src:e,alt:""},null,40,P)],2)))),128))])])}var E=s(171),L={name:"GoodsImage",props:{images:{type:Array,default:()=>[]}},setup(e){const o=(0,h.iH)(0),s=(0,h.iH)(null),t=(0,h.iH)(null),{elementX:n,elementY:l,isOutside:c}=(0,E.jY)(s),d=(0,h.qj)({left:0,top:0}),i=(0,h.qj)({backgroundPositionX:0,backgroundPositionY:0});return(0,a.YP)([n,l,c],(()=>{n.value<100?d.left=0:n.value>300?d.left=200:d.left=n.value-100,l.value<100?d.top=0:l.value>300?d.top=200:d.top=l.value-100,i.backgroundPositionX=-2*d.left+"px",i.backgroundPositionY=-2*d.top+"px",d.left=d.left+"px",d.top=d.top+"px",t.value=!c.value})),{currIndex:o,target:s,l_position:i,m_position:d,show:t}}};const A=(0,H.Z)(L,[["render",X],["__scopeId","data-v-4e848e70"]]);var U=A;const T={class:"goods-sales"},K=(0,a.uE)('<li data-v-c7caeb42><p data-v-c7caeb42>销量人气</p><p data-v-c7caeb42>200+</p><p data-v-c7caeb42><i class="iconfont icon-task-filling" data-v-c7caeb42></i>销量人气</p></li><li data-v-c7caeb42><p data-v-c7caeb42>商品评价</p><p data-v-c7caeb42>400+</p><p data-v-c7caeb42><i class="iconfont icon-comment-filling" data-v-c7caeb42></i>查看评价</p></li><li data-v-c7caeb42><p data-v-c7caeb42>收藏人气</p><p data-v-c7caeb42>600+</p><p data-v-c7caeb42><i class="iconfont icon-favorite-filling" data-v-c7caeb42></i>收藏商品</p></li><li data-v-c7caeb42><p data-v-c7caeb42>品牌信息</p><p data-v-c7caeb42>苏宁电器</p><p data-v-c7caeb42><i class="iconfont icon-dynamic-filling" data-v-c7caeb42></i>品牌主页</p></li>',4),$=[K];function O(e,o,s,t,n,l){return(0,a.wg)(),(0,a.iD)("ul",T,$)}var q={name:"GoodsSales"};const R=(0,H.Z)(q,[["render",O],["__scopeId","data-v-c7caeb42"]]);var B=R;const F=e=>((0,a.dD)("data-v-1bf96a4d"),e=e(),(0,a.Cn)(),e),M={key:0},V={class:"g-name"},J={class:"g-desc"},Q={class:"g-price"},ee={class:"g-service"},oe=F((()=>(0,a._)("dl",null,[(0,a._)("dt",null,"促销"),(0,a._)("dd",null,"12月好物放送，App领券购买直降120元")],-1))),se=F((()=>(0,a._)("dt",null,"配送",-1))),ae=F((()=>(0,a._)("dl",null,[(0,a._)("dt",null,"服务"),(0,a._)("dd",null,[(0,a._)("span",null,"无忧退货"),(0,a._)("span",null,"快速退款"),(0,a._)("span",null,"免费包邮"),(0,a._)("a",{href:"javascript:;"},"了解详情")])],-1)));function te(e,o,s,n,l,c){const d=(0,a.up)("XtxCity");return(0,a.wg)(),(0,a.iD)(a.HY,null,[s.goods?((0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("p",V,(0,t.zw)(s.goods.name),1),(0,a._)("p",J,(0,t.zw)(s.goods.desc),1),(0,a._)("p",Q,[(0,a._)("span",null,(0,t.zw)(s.goods.price),1),(0,a._)("span",null,(0,t.zw)(s.goods.oldPrice),1)]),(0,a._)("p",null,(0,t.zw)(s.goods.specsText),1)])):(0,a.kq)("",!0),(0,a._)("div",ee,[oe,(0,a._)("dl",null,[se,(0,a._)("dd",null,[(0,a.Uk)("至 "),(0,a.Wm)(d,{onChange:n.changeCity,fullLocation:n.fullLocation},null,8,["onChange","fullLocation"])])]),ae])],64)}var ne={name:"GoodName",props:{goods:{type:Object,default:()=>{}}},setup(e){const o=(0,h.iH)("110000"),s=(0,h.iH)("119900"),a=(0,h.iH)("110101"),t=(0,h.iH)("北京市 市辖区 东城区");if(e.userAddresses){const n=e.goods.userAddresses.find((e=>1===e.isDefault));n&&(o.value=n.provinceCode,s.value=n.cityCode,a.value=n.countyCode,t.value=n.fullLocation)}const n=e=>{o.value=e.provinceCode,s.value=e.cityCode,a.value=e.countyCode,t.value=e.fullLocation};return{fullLocation:t,changeCity:n}}};const le=(0,H.Z)(ne,[["render",te],["__scopeId","data-v-1bf96a4d"]]);var ce=le;const de=["onClick","title","src"],ie=["onClick"];function ue(e,o,s,n,l,c){return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.goods.specs,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"goods-sku",key:e.name},[(0,a._)("dl",null,[(0,a._)("dt",null,(0,t.zw)(e.name),1),(0,a._)("dd",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.values,(o=>((0,a.wg)(),(0,a.iD)(a.HY,null,[o.picture?((0,a.wg)(),(0,a.iD)("img",{key:0,onClick:s=>n.clickSpecs(e,o),class:(0,t.C_)({selected:o.selected}),title:o.name,src:o.picture},null,10,de)):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,t.C_)({selected:o.selected}),onClick:s=>n.clickSpecs(e,o)},(0,t.zw)(o.name),11,ie))],64)))),256))])])])))),128)}function re(e){const o=[],s=2**e.length;for(let a=0;a<s;a+=1){const s=[];for(let o=0;o<e.length;o+=1)a&1<<o&&s.push(e[o]);o.push(s)}return o}const pe="♥",ge=e=>{const o={};return e.forEach((e=>{if(e.inventory>0){const s=e.specs.map((e=>e.valueName)),a=re(s);a.forEach((s=>{const a=s.join(pe);o[a]?o[a].push(e.id):o[a]=[e.id]}))}})),o},ve=e=>{const o=[];return e.forEach(((e,s)=>{const a=e.values.find((e=>e.selected));o.push(a?a.name:void 0)})),o},me=(e,o)=>{e.forEach(((s,a)=>{const t=ve(e);s.values.forEach((e=>{if(e.name===t[a])return;t[a]=e.name;const s=t.filter((e=>e)).join(pe);e.disabled=!o[s]}))}))},_e=(e,o)=>{const s=e.skus.find((e=>e.id===o));s&&e.specs.forEach(((e,o)=>{e.values.forEach((e=>{e.name===s.specs[o].valueName&&(e.selected=!0)}))}))};var fe={name:"GoodsSku",emits:["changeSku"],props:{goods:{type:Object,default:()=>{}},skuId:{type:String,default:""}},setup(e,{emit:o}){_e(e.goods,e.skuId);const s=ge(e.goods.skus);me(e.goods.specs,s);const a=(a,t)=>{if(t.selected)return void(t.selected=!1);a.values.forEach((e=>{e.selected=!1})),t.selected=!0,me(e.goods.specs,s);const n=ve(e.goods.specs).filter((e=>e));if(n.length===e.goods.specs.length){const a=s[n.join(pe)],t=e.goods.skus.find((e=>e.id===a[0]));o("changeSku",{skuId:t.id,price:t.price,oldPrice:t.oldPrice,inventory:t.inventory,specsText:t.specs.reduce(((e,o)=>`${e} ${o.name}：${o.valueName}`),"").replace(" ","")})}else o("changeSku",{})};return ge(e.goods.skus),{clickSpecs:a}}};const we=(0,H.Z)(fe,[["render",ue],["__scopeId","data-v-2d79b12c"]]);var ke=we;const ye={class:"goods-tabs"};function be(e,o,s,n,l,c){return(0,a.wg)(),(0,a.iD)("div",ye,[(0,a._)("nav",null,[(0,a._)("a",{onClick:o[0]||(o[0]=e=>n.activeName="goodsDetail"),class:(0,t.C_)({active:"goodsDetail"===n.activeName}),href:"javascript:;"},"商品详情",2),(0,a._)("a",{onClick:o[1]||(o[1]=e=>n.activeName="goodsComment"),class:(0,t.C_)({active:"goodsComment"===n.activeName}),href:"javascript:;"},[(0,a.Uk)("商品评价"),(0,a._)("span",null,(0,t.zw)(n.goods.commentCount),1)],2)]),((0,a.wg)(),(0,a.j4)(a.Ob,null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(n.activeName)))],1024))])}const he={class:"goods-detail"},Ce={class:"attrs"},De={class:"dt"},Ie={class:"dd"};function Ge(e,o,s,n,l,c){const d=(0,a.Q2)("lazy");return(0,a.wg)(),(0,a.iD)("div",he,[(0,a._)("ul",Ce,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.goods.details.properties,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.value},[(0,a._)("span",De,(0,t.zw)(e.name),1),(0,a._)("span",Ie,(0,t.zw)(e.value),1)])))),128))]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.goods.details.pictures,(e=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("img",{key:e,alt:""})),[[d,e]]))),128))])}var xe={name:"GoodsDetail",setup(){const e=(0,a.f3)("goods");return{goods:e}}};const He=(0,H.Z)(xe,[["render",Ge],["__scopeId","data-v-3b4e6e04"]]);var je=He;const ze={class:"goods-comment"};function Se(e,o,s,t,n,l){return(0,a.wg)(),(0,a.iD)("div",ze,"评价")}var We={name:"GoodsComment"};const Ze=(0,H.Z)(We,[["render",Se]]);var Ye=Ze,Ne={name:"GoodsTabs",components:{goodsDetail:je,goodsComment:Ye},setup(){const e=(0,h.iH)("goodsDetail"),o=(0,a.f3)("goods");return{activeName:e,goods:o}}};const Pe=(0,H.Z)(Ne,[["render",be]]);var Xe=Pe;const Ee={class:"goods-hot"};function Le(e,o,s,n,l,c){const d=(0,a.up)("GoodsItem");return(0,a.wg)(),(0,a.iD)("div",Ee,[(0,a._)("h3",null,(0,t.zw)(n.title),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.goodsArr,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.name,goods:e},null,8,["goods"])))),128))])}var Ae=s(2483),Ue=s(9546),Te={name:"GoodsHot",components:{GoodsItem:Ue.Z},props:{type:{type:Number,default:1}},setup(e){const o=(0,Ae.yj)(),s={1:"24小时热销榜",2:"周热销榜",3:"总热销榜"},t=(0,a.Fl)((()=>s[e.type])),n=(0,h.iH)([]);return G({id:o.params.id,type:e.type,limit:3}).then((e=>{n.value=e.result})),{title:t,goodsArr:n}}};const Ke=(0,H.Z)(Te,[["render",Le]]);var $e=Ke,Oe={name:"XtxGoodsPage",components:{GoodsRelevant:z,GoodsImage:U,GoodsSales:B,GoodsName:ce,GoodsSku:ke,GoodsTabs:Xe,GoodsHot:$e},setup(){const e=qe(),o=(0,h.iH)(1),s=o=>{o.skuId&&(e.value.price=o.price,e.value.oldPrice=o.oldPrice,e.value.inventory=o.inventory,e.value.specsText=o.specsText)};return{goods:e,changeSku:s,num:o}}};const qe=()=>{const e=(0,Ae.yj)(),o=(0,h.iH)(null);return(0,a.YP)((()=>e.params.id),(s=>{s&&`/product/${s}`===e.path&&D(e.params.id).then((e=>{o.value=null,(0,a.Y3)((()=>{o.value=e.result}))}))}),{immediate:!0}),(0,a.JJ)("goods",o),o},Re=(0,H.Z)(Oe,[["render",m],["__scopeId","data-v-19c73052"]]);var Be=Re}}]);