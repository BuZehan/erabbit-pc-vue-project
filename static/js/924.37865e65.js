"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[924],{1787:function(e,t,s){s.d(t,{IA:function(){return o},YF:function(){return r},ZI:function(){return n},lK:function(){return l},t5:function(){return c}});var a=s(4471);const o=e=>(0,a.Z)("/goods","get",{id:e}),n=({id:e,limit:t=16})=>(0,a.Z)("/goods/relevant","get",{id:e,limit:t}),l=({id:e,type:t,limit:s=3})=>(0,a.Z)("/goods/hot","get",{id:e,type:t,limit:s}),c=e=>(0,a.Z)(`https://mock.boxuegu.com/mock/1175/goods/${e}/evaluate`,"get"),r=(e,t)=>(0,a.Z)(`https://mock.boxuegu.com/mock/1175/goods/${e}/evaluate/page`,"get",t)},2924:function(e,t,s){s.r(t),s.d(t,{default:function(){return ke}});var a=s(3396),o=s(7139);const n=e=>((0,a.dD)("data-v-864c2ee8"),e=e(),(0,a.Cn)(),e),l={class:"xtx-cart-page"},c={class:"container"},r={class:"cart"},u={width:"120"},d=n((()=>(0,a._)("th",{width:"400"},"商品信息",-1))),i=n((()=>(0,a._)("th",{width:"220"},"单价",-1))),p=n((()=>(0,a._)("th",{width:"180"},"数量",-1))),g=n((()=>(0,a._)("th",{width:"180"},"小计",-1))),k=n((()=>(0,a._)("th",{width:"140"},"操作",-1))),h={class:"goods"},v=["src"],_={class:"name ellipsis"},m={class:"tc"},f={key:0},C={class:"red"},w={class:"tc"},b={class:"tc"},I={class:"tc"},y={class:"f16 red"},x={class:"tc"},S=n((()=>(0,a._)("p",null,[(0,a._)("a",{href:"javascript:;"},"移入收藏夹")],-1))),D=["onClick"],$=n((()=>(0,a._)("p",null,[(0,a._)("a",{href:"javascript:;"},"找相似")],-1))),Z={key:0},W={colspan:"6"},j={class:"action"},z={class:"batch"},A=n((()=>(0,a._)("a",{href:"javascript:;"},"移入收藏夹",-1))),H={class:"total"},T={class:"red"};function U(e,t,s,n,U,X){const E=(0,a.up)("XtxBreadItem"),N=(0,a.up)("XtxBread"),V=(0,a.up)("XtxCheckbox"),P=(0,a.up)("RouterLink"),q=(0,a.up)("CartSku"),G=(0,a.up)("XtxNumbox"),B=(0,a.up)("CartNone"),K=(0,a.up)("XtxButton"),R=(0,a.up)("GoodRelevant");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",c,[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a.Uk)("购物车")])),_:1})])),_:1}),(0,a._)("div",r,[(0,a._)("table",null,[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",u,[(0,a.Wm)(V,{onChange:n.checkAllCart,modelValue:e.$store.getters["cart/isCheckAll"]},{default:(0,a.w5)((()=>[(0,a.Uk)("全选 ")])),_:1},8,["onChange","modelValue"])]),d,i,p,g,k])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.$store.getters["cart/validList"],(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.skuId},[(0,a._)("td",null,[(0,a.Wm)(V,{onChange:t=>n.checkOne(e.skuId,t),modelValue:e.selected},null,8,["onChange","modelValue"])]),(0,a._)("td",null,[(0,a._)("div",h,[(0,a.Wm)(P,{to:`/product/${e.id}`},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.picture,alt:""},null,8,v)])),_:2},1032,["to"]),(0,a._)("div",null,[(0,a._)("p",_,(0,o.zw)(e.name),1),(0,a.Wm)(q,{skuId:e.skuId,onChange:t=>n.updateCartSku(e.skuId,t),attrsText:e.attrsText},null,8,["skuId","onChange","attrsText"])])])]),(0,a._)("td",m,[(0,a._)("p",null,"¥"+(0,o.zw)(e.nowPrice),1),e.price-e.nowPrice>0?((0,a.wg)(),(0,a.iD)("p",f,[(0,a.Uk)("比加入时降价 "),(0,a._)("span",C,"¥"+(0,o.zw)(e.price-e.nowPrice),1)])):(0,a.kq)("",!0)]),(0,a._)("td",w,[(0,a.Wm)(G,{onChange:t=>n.addCart(t,e.skuId),modelValue:e.count},null,8,["onChange","modelValue"])]),(0,a._)("td",b,[(0,a._)("td",I,[(0,a._)("p",y,"¥"+(0,o.zw)((e.nowPrice*e.count).toFixed(2)),1)])]),(0,a._)("td",x,[S,(0,a._)("p",null,[(0,a._)("a",{onClick:t=>n.deleteCart(e.skuId),class:"green"},"删除",8,D)]),$])])))),128)),0===e.$store.getters["cart/validList"].length?((0,a.wg)(),(0,a.iD)("tr",Z,[(0,a._)("td",W,[(0,a.Wm)(B)])])):(0,a.kq)("",!0)])])]),(0,a._)("div",j,[(0,a._)("div",z,[(0,a.Wm)(V,{modelValue:e.$store.getters["cart/isCheckAll"]},{default:(0,a.w5)((()=>[(0,a.Uk)("全选")])),_:1},8,["modelValue"]),(0,a._)("a",{href:"javascript:;",onClick:t[0]||(t[0]=e=>n.batchDelete())},"删除商品"),A,(0,a._)("a",{href:"javascript:;",onClick:t[1]||(t[1]=e=>n.batchDelete(!0))},"清空失效商品")]),(0,a._)("div",H,[(0,a.Uk)(" 共 "+(0,o.zw)(e.$store.getters["cart/validTotal"])+" 件商品，已选择 "+(0,o.zw)(e.$store.getters["cart/selectedTotal"])+" 件，商品合计： ",1),(0,a._)("span",T,"¥"+(0,o.zw)(e.$store.getters["cart/selectedAmount"]),1),(0,a.Wm)(K,{type:"primary",onClick:n.goCheckout},{default:(0,a.w5)((()=>[(0,a.Uk)("下单结算")])),_:1},8,["onClick"])])]),(0,a.Wm)(R)])])}s(7658);var X=s(9253),E=s(4427);const N=e=>((0,a.dD)("data-v-18e77b8d"),e=e(),(0,a.Cn)(),e),V={class:"cart-none"},P=N((()=>(0,a._)("img",{src:E,alt:""},null,-1))),q=N((()=>(0,a._)("p",null,"购物车内暂时没有商品",-1))),G={class:"btn"};function B(e,t,s,o,n,l){const c=(0,a.up)("XtxButton");return(0,a.wg)(),(0,a.iD)("div",V,[P,q,(0,a._)("div",G,[(0,a.Wm)(c,{type:"primary",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},{default:(0,a.w5)((()=>[(0,a.Uk)("继续逛逛")])),_:1})])])}var K={name:"CartNone"},R=s(89);const Y=(0,R.Z)(K,[["render",B],["__scopeId","data-v-18e77b8d"]]);var F=Y;const L=e=>((0,a.dD)("data-v-1b270b0f"),e=e(),(0,a.Cn)(),e),O={class:"cart-sku",ref:"target"},M={class:"ellipsis"},J=L((()=>(0,a._)("i",{class:"iconfont icon-angle-down"},null,-1))),Q={key:0,class:"layer"},ee={key:0,class:"loading"};function te(e,t,s,n,l,c){const r=(0,a.up)("GoodsSku"),u=(0,a.up)("XtxButton");return(0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("div",{class:"attrs",onClick:t[0]||(t[0]=(...e)=>n.toggle&&n.toggle(...e))},[(0,a._)("span",M,(0,o.zw)(s.attrsText),1),J]),n.visiable?((0,a.wg)(),(0,a.iD)("div",Q,[n.goods?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ee)),n.goods?((0,a.wg)(),(0,a.j4)(r,{key:1,onChangeSku:n.changeSku,skuId:s.skuId,goods:n.goods},null,8,["onChangeSku","skuId","goods"])):(0,a.kq)("",!0),n.goods?((0,a.wg)(),(0,a.j4)(u,{key:2,onClick:n.submit,type:"primary",size:"mini",style:{"margin-left":"60px"}},{default:(0,a.w5)((()=>[(0,a.Uk)("确认")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],512)}var se=s(4870),ae=s(8401),oe=s(6624),ne=s(5154),le={name:"CartSku",components:{GoodsSku:ne.Z},props:{attrsText:{type:String,default:""},skuId:{type:String,default:""}},setup(e,{emit:t}){const s=(0,se.iH)(!1),a=(0,se.iH)(null),o=(0,se.iH)(null),n=()=>{s.value=!1,o.value=null},l=()=>{s.value=!0,(0,oe.Kx)(e.skuId).then((({result:e})=>{o.value=e})).catch((e=>console.log("err :",e)))},c=()=>{s?l():n()};(0,ae.i9)(a,(()=>{n()}));const r=(0,se.iH)(null),u=e=>{r.value=e},d=()=>{r.value&&r.value.skuId&&r.value.skuId!==e.skuId&&(t("change",r.value),n())};return{visiable:s,target:a,toggle:c,goods:o,changeSku:u,submit:d}}};const ce=(0,R.Z)(le,[["render",te],["__scopeId","data-v-1b270b0f"]]);var re=ce,ue=s(8391),de=s(65),ie=s(2483),pe={name:"XtxCartPage",components:{GoodRelevant:X.Z,CartNone:F,CartSku:re},emits:["change"],setup(){const e=(0,de.oR)(),{proxy:t}=(0,a.FN)(),s=(t,s)=>{e.dispatch("cart/updateCart",{skuId:t,selected:s})},o=(t,s)=>{e.dispatch("cart/updateCart",{count:t,skuId:s})},n=t=>{e.dispatch("cart/checkAllCart",t)},l=s=>{t.$Confirm({text:" 您确认从购物车删除该商品吗？"}).then((()=>{e.dispatch("cart/deleteCart",s)})).catch((e=>{}))},c=s=>{t.$Confirm({text:` 您确认从购物车删除${s?"所有失效商品":"该商品"}吗？`}).then((()=>{e.dispatch("cart/batchDelete",s)}))},r=(t,s)=>{e.dispatch("cart/updateCartSku",{oldSkuId:t,newSku:s})},u=(0,ie.tv)(),d=()=>{if(0===e.getters["cart/selectedTotal"])return(0,ue.Z)({text:"至少选中一件商品才能结算"});e.state.user.profile.token?u.push("/member/checkout"):t.$Confirm({text:"下单结算需要登录，您是否去登录？"}).then((()=>{u.push("/member/checkout")})).catch((e=>{}))};return{checkOne:s,checkAllCart:n,addCart:o,deleteCart:l,batchDelete:c,updateCartSku:r,goCheckout:d}}};const ge=(0,R.Z)(pe,[["render",U],["__scopeId","data-v-864c2ee8"]]);var ke=ge},9253:function(e,t,s){s.d(t,{Z:function(){return v}});var a=s(3396),o=s(7139);const n=e=>((0,a.dD)("data-v-e496b284"),e=e(),(0,a.Cn)(),e),l={class:"goods-relevant"},c={class:"header"},r=n((()=>(0,a._)("i",{class:"icon"},null,-1))),u={class:"title"};function d(e,t,s,n,d,i){const p=(0,a.up)("XtxCarousel");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",c,[r,(0,a._)("span",u,(0,o.zw)(s.goodsId?"同类商品推荐":"猜你喜欢"),1)]),(0,a.Wm)(p,{sliders:n.goodsArr,"auto-play":""},null,8,["sliders"])])}s(7658);var i=s(4870),p=s(1787),g={name:"GoodsRelevant",props:{goodsId:{type:String,default:""}},setup(e){const t=(0,i.iH)([]);return(0,p.ZI)(e.goodsId).then((e=>{const s=4,a=Math.ceil(e.result.length/s);for(let o=0;o<a;o++)t.value.push(e.result.slice(s*o,s*(o+1)))})),{goodsArr:t}}},k=s(89);const h=(0,k.Z)(g,[["render",d],["__scopeId","data-v-e496b284"]]);var v=h},5154:function(e,t,s){s.d(t,{Z:function(){return _}});var a=s(3396),o=s(7139);const n=["onClick","title","src"],l=["onClick"];function c(e,t,s,c,r,u){return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.goods.specs,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"goods-sku",key:e.name},[(0,a._)("dl",null,[(0,a._)("dt",null,(0,o.zw)(e.name),1),(0,a._)("dd",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.values,(t=>((0,a.wg)(),(0,a.iD)(a.HY,null,[t.picture?((0,a.wg)(),(0,a.iD)("img",{key:0,onClick:s=>c.clickSpecs(e,t),class:(0,o.C_)({selected:t.selected}),title:t.name,src:t.picture},null,10,n)):((0,a.wg)(),(0,a.iD)("span",{key:1,class:(0,o.C_)({selected:t.selected}),onClick:s=>c.clickSpecs(e,t)},(0,o.zw)(t.name),11,l))],64)))),256))])])])))),128)}s(7658);function r(e){const t=[],s=2**e.length;for(let a=0;a<s;a+=1){const s=[];for(let t=0;t<e.length;t+=1)a&1<<t&&s.push(e[t]);t.push(s)}return t}const u="♥",d=e=>{const t={};return e.forEach((e=>{if(e.inventory>0){const s=e.specs.map((e=>e.valueName)),a=r(s);a.forEach((s=>{const a=s.join(u);t[a]?t[a].push(e.id):t[a]=[e.id]}))}})),t},i=e=>{const t=[];return e.forEach(((e,s)=>{const a=e.values.find((e=>e.selected));t.push(a?a.name:void 0)})),t},p=(e,t)=>{e.forEach(((s,a)=>{const o=i(e);s.values.forEach((e=>{if(e.name===o[a])return;o[a]=e.name;const s=o.filter((e=>e)).join(u);e.disabled=!t[s]}))}))},g=(e,t)=>{const s=e.skus.find((e=>e.id===t));s&&e.specs.forEach(((e,t)=>{e.values.forEach((e=>{e.name===s.specs[t].valueName&&(e.selected=!0)}))}))};var k={name:"GoodsSku",emits:["changeSku"],props:{goods:{type:Object,default:()=>{}},skuId:{type:String,default:""}},setup(e,{emit:t}){g(e.goods,e.skuId);const s=d(e.goods.skus);p(e.goods.specs,s);const a=(a,o)=>{if(console.log("skus :",e.goods.skus),console.log("specs :",e.goods.specs),o.selected)return void(o.selected=!1);a.values.forEach((e=>{e.selected=!1})),o.selected=!0,p(e.goods.specs,s);const n=i(e.goods.specs).filter((e=>e));if(n.length===e.goods.specs.length){const a=s[n.join(u)],o=e.goods.skus.find((e=>e.id===a[0]));t("changeSku",{skuId:o.id,price:o.price,oldPrice:o.oldPrice,inventory:o.inventory,specsText:o.specs.reduce(((e,t)=>`${e} ${t.name}：${t.valueName}`),"").replace(" ","")})}else t("changeSku",{})};return d(e.goods.skus),{clickSpecs:a}}},h=s(89);const v=(0,h.Z)(k,[["render",c],["__scopeId","data-v-39dcc14e"]]);var _=v}}]);