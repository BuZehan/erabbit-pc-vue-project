"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[23],{9546:function(e,a,t){t.d(a,{Z:function(){return p}});var s=t(3396),o=t(7139);const r={alt:""},n={class:"name ellipsis"},i={class:"desc ellipsis"},l={class:"price"};function c(e,a,t,c,d,u){const g=(0,s.up)("RouterLink"),p=(0,s.Q2)("lazy");return(0,s.wg)(),(0,s.j4)(g,{to:`/product/${t.goods.id}`,class:"goods-item"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("img",r,null,512),[[p,t.goods.picture]]),(0,s._)("p",n,(0,o.zw)(t.goods.name),1),(0,s._)("p",i,(0,o.zw)(t.goods.tag),1),(0,s._)("p",l,"¥"+(0,o.zw)(t.goods.price),1)])),_:1},8,["to"])}var d={name:"GoodsItem",props:{goods:Object,default:()=>{}}},u=t(89);const g=(0,u.Z)(d,[["render",c],["__scopeId","data-v-72126194"]]);var p=g},6023:function(e,a,t){t.r(a),t.d(a,{default:function(){return q}});var s=t(3396);const o={class:"sub-category"},r={class:"container"},n={class:"goods-list"};function i(e,a,t,i,l,c){const d=(0,s.up)("SubBread"),u=(0,s.up)("SubFilter"),g=(0,s.up)("SubSort"),p=(0,s.up)("GoodsItem"),h=(0,s.up)("XtxInfiniteLoading");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[(0,s.Wm)(d),(0,s.Wm)(u,{onFilterChange:i.changeFilter},null,8,["onFilterChange"]),(0,s._)("div",n,[(0,s.Wm)(g,{onSortChange:i.changeSort},null,8,["onSortChange"]),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.goodsList,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e},[(0,s.Wm)(p,{goods:e},null,8,["goods"])])))),128))]),(0,s.Wm)(h,{loading:i.loading,finished:i.finished,onInfinite:i.getData},null,8,["loading","finished","onInfinite"])])])])}t(7658);var l=t(7139),c=t(9242);function d(e,a,t,o,r,n){const i=(0,s.up)("XtxBreadItem"),d=(0,s.up)("XtxBread");return(0,s.wg)(),(0,s.j4)(d,{class:"container"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首页")])),_:1}),o.category.top?((0,s.wg)(),(0,s.j4)(i,{key:0,to:`/category/${o.category.top.id}`},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(o.category.top.name),1)])),_:1},8,["to"])):(0,s.kq)("",!0),(0,s.Wm)(c.uT,{name:"fade-el",mode:"out-in"},{default:(0,s.w5)((()=>[o.category.sub?((0,s.wg)(),(0,s.j4)(i,{key:o.category.sub.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(o.category.sub.name),1)])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})}var u=t(65),g=t(2483),p={name:"SubBread",setup(){const e=(0,g.yj)(),a=(0,u.oR)(),t=(0,s.Fl)((()=>{const t={};return a.state.category.list.forEach((a=>{a.children&&a.children.forEach((s=>{s.id===e.params.id&&(t.sub={id:s.id,name:s.name},t.top={id:a.id,name:a.name})}))})),t}));return{category:t}}},h=t(89);const m=(0,h.Z)(p,[["render",d]]);var v=m;const f=e=>((0,s.dD)("data-v-e98f634a"),e=e(),(0,s.Cn)(),e),_={key:0,class:"sub-filter"},w={class:"item"},k=f((()=>(0,s._)("div",{class:"head"},"品牌：",-1))),y={class:"body"},b=["onClick"],C={class:"head"},S={class:"body"},D=["onClick"],P={key:1,class:"sub-filter"};function F(e,a,t,o,r,n){const i=(0,s.up)("XtxSkeleton");return o.filterData&&!o.filterLoading?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("div",w,[k,(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filterData.brands,(e=>((0,s.wg)(),(0,s.iD)("a",{class:(0,l.C_)({active:o.filterData.selectedBrand===e.id}),onClick:a=>o.changeBrand(e.id),key:e.id},(0,l.zw)(e.name),11,b)))),128))])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filterData.saleProperties,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"item",key:e.id},[(0,s._)("div",C,(0,l.zw)(e.name)+":",1),(0,s._)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.properties,(a=>((0,s.wg)(),(0,s.iD)("a",{class:(0,l.C_)({active:e.selectedProp===a.id}),onClick:t=>o.changeAttr(e,a.id),key:a.id},(0,l.zw)(a.name),11,D)))),128))])])))),128))])):((0,s.wg)(),(0,s.iD)("div",P,[(0,s.Wm)(i,{class:"item",width:"800px",height:"40px"}),(0,s.Wm)(i,{class:"item",width:"800px",height:"40px"}),(0,s.Wm)(i,{class:"item",width:"600px",height:"40px"}),(0,s.Wm)(i,{class:"item",width:"600px",height:"40px"}),(0,s.Wm)(i,{class:"item",width:"600px",height:"40px"})]))}t(541);var j=t(588),x=t(4870),W={name:"SubFilter",setup(e,{emit:a}){const t=(0,g.yj)(),o=(0,x.iH)(null),r=(0,x.iH)(!1);(0,s.YP)((()=>t.params.id),((e,a)=>{e&&t.path==="/category/sub/"+e&&(r.value=!0,e&&(0,j.qu)(t.params.id).then((({result:e})=>{e.selectedBrand=null,e.brands.unshift({id:null,name:"全部"}),e.saleProperties.forEach((e=>{e.selectedProp=void 0,e.properties.unshift({id:null,name:"全部"})})),o.value=e,r.value=!1})))}),{immediate:!0});const n=()=>{const e={},a=[];return e.brandId=o.value.selectedBrand,o.value.saleProperties.forEach((e=>{const t=e.properties.find((a=>a.id===e.selectedProp));t&&void 0!==t.id&&a.push({groupName:e.name,propertyName:t.name})})),a.length&&(e.attrs=a),e},i=e=>{o.value.selectedBrand!==e&&(o.value.selectedBrand=e,a("filter-change",n()))},l=(e,t)=>{e.selectedProp!==t&&(e.selectedProp=t,a("filter-change",n()))};return{filterData:o,filterLoading:r,changeBrand:i,changeAttr:l}}};const I=(0,h.Z)(W,[["render",F],["__scopeId","data-v-e98f634a"]]);var B=I;const z={class:"sub-sort"},H={class:"sort"},M={class:"check"};function U(e,a,t,o,r,n){const i=(0,s.up)("XtxCheckbox");return(0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("div",H,[(0,s._)("a",{class:(0,l.C_)({active:null===o.sortParams.sortField}),onClick:a[0]||(a[0]=e=>o.changeSort(null)),href:"javascript:;"},"默认排序",2),(0,s._)("a",{class:(0,l.C_)({active:"publishTime"===o.sortParams.sortField}),onClick:a[1]||(a[1]=e=>o.changeSort("publishTime")),href:"javascript:;"},"最新商品",2),(0,s._)("a",{class:(0,l.C_)({active:"orderNum"===o.sortParams.sortField}),onClick:a[2]||(a[2]=e=>o.changeSort("orderNum")),href:"javascript:;"},"最高人气",2),(0,s._)("a",{class:(0,l.C_)({active:"evaluateNum"===o.sortParams.sortField}),onClick:a[3]||(a[3]=e=>o.changeSort("evaluateNum")),href:"javascript:;"},"评论最多",2),(0,s._)("a",{onClick:a[4]||(a[4]=e=>o.changeSort("price")),href:"javascript:;"},[(0,s.Uk)(" 价格排序 "),(0,s._)("i",{class:(0,l.C_)(["arrow up",{active:"price"===o.sortParams.sortField&&"asc"==o.sortParams.sortMethod}])},null,2),(0,s._)("i",{class:(0,l.C_)(["arrow down",{active:"price"===o.sortParams.sortField&&"desc"==o.sortParams.sortMethod}])},null,2)])]),(0,s._)("div",M,[(0,s.Wm)(i,{onChange:o.changeCheck,modelValue:o.sortParams.inventory,"onUpdate:modelValue":a[5]||(a[5]=e=>o.sortParams.inventory=e)},{default:(0,s.w5)((()=>[(0,s.Uk)("仅显示有货商品")])),_:1},8,["onChange","modelValue"]),(0,s.Wm)(i,{onChange:o.changeCheck,modelValue:o.sortParams.onlyDiscount,"onUpdate:modelValue":a[6]||(a[6]=e=>o.sortParams.onlyDiscount=e)},{default:(0,s.w5)((()=>[(0,s.Uk)("仅显示特惠商品")])),_:1},8,["onChange","modelValue"])])])}var Z={name:"SubSort",setup(e,{emit:a}){const t=(0,x.qj)({inventory:!1,onlyDiscount:!1,sortField:null,sortMethod:null}),s=e=>{if("price"===e)t.sortField=e,null===t.sortMethod?t.sortMethod="desc":t.sortMethod="desc"===t.sortMethod?"asc":"desc";else{if(t.sortField===e)return;t.sortField=e,t.sortMethod=null}a("sort-change",t)},o=e=>{a("sort-change",t)};return{sortParams:t,changeSort:s,changeCheck:o}}};const L=(0,h.Z)(Z,[["render",U],["__scopeId","data-v-2082456a"]]);var N=L,V=t(9546),Y={name:"SubCategory",components:{SubBread:v,SubFilter:B,SubSort:N,GoodsItem:V.Z},setup(){const e=(0,g.yj)(),a=(0,x.iH)(!1),t=(0,x.iH)(!1),o=(0,x.iH)([]);let r={page:1,pageSize:20};const n=()=>{a.value=!0,r.categoryId=e.params.id,(0,j.Sm)(r).then((({result:e})=>{e.items.length?(o.value.push(...e.items),r.page++):t.value=!0,a.value=!1}))};(0,s.YP)((()=>e.params.id),(a=>{a&&e.path==="/category/sub/"+a&&(o.value=[],r={page:1,pageSize:20},t.value=!1)}));const i=e=>{console.log(e),r={...r,...e},r.page=1,o.value=[],t.value=!1},l=e=>{console.log(e),r={...r,...e},r.page=1,o.value=[],t.value=!1};return{loading:a,finished:t,goodsList:o,getData:n,changeFilter:i,changeSort:l}}};const X=(0,h.Z)(Y,[["render",i],["__scopeId","data-v-38813ddc"]]);var q=X}}]);