"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[697],{7535:function(e,t,a){a.d(t,{KB:function(){return _},L8:function(){return c},LV:function(){return n},Nc:function(){return v},Nv:function(){return p},RA:function(){return l},Yb:function(){return i},a_:function(){return r},li:function(){return d},sl:function(){return u},y$:function(){return o}});var s=a(4471);const l=()=>(0,s.Z)("/member/order/pre","get"),d=e=>(0,s.Z)(`/member/order/repurchase/${e}`,"get"),o=e=>(0,s.Z)("/member/address","post",e),i=e=>(0,s.Z)(`/member/address/${e.id}`,"put",e),n=e=>(0,s.Z)("/member/order","post",e),r=e=>(0,s.Z)("/member/order/"+e,"get"),c=({orderState:e,page:t,pageSize:a})=>(0,s.Z)("/member/order","get",{orderState:e,page:t,pageSize:a}),u=(e,t)=>(0,s.Z)(`/member/order/${e}/cancel`,"put",{cancelReason:t}),p=e=>(0,s.Z)("/member/order","delete",{ids:e}),v=e=>(0,s.Z)(`/member/order/${e}/receipt`,"put"),_=e=>(0,s.Z)(`/member/order/${e}/logistics`,"get")},4697:function(e,t,a){a.r(t),a.d(t,{default:function(){return De}});var s=a(3396),l=a(7139);const d=e=>((0,s.dD)("data-v-35c173a8"),e=e(),(0,s.Cn)(),e),o={class:"xtx-pay-checkout-page"},i={class:"container"},n={key:0,class:"wrapper"},r=d((()=>(0,s._)("h3",{class:"box-title"},"收货地址",-1))),c={class:"box-body"},u=d((()=>(0,s._)("h3",{class:"box-title"},"商品信息",-1))),p={class:"box-body"},v={class:"goods"},_=d((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{width:"520"},"商品信息"),(0,s._)("th",{width:"170"},"单价"),(0,s._)("th",{width:"170"},"数量"),(0,s._)("th",{width:"170"},"小计"),(0,s._)("th",{width:"170"},"实付")])],-1))),m={href:"javascript:;",class:"info"},f=["src"],h={class:"right"},g=(0,s.uE)('<h3 class="box-title" data-v-35c173a8>配送时间</h3><div class="box-body" data-v-35c173a8><a class="my-btn active" href="javascript:;" data-v-35c173a8>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:;" data-v-35c173a8>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-35c173a8>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-35c173a8>支付方式</h3><div class="box-body" data-v-35c173a8><a class="my-btn active" href="javascript:;" data-v-35c173a8>在线支付</a><a class="my-btn" href="javascript:;" data-v-35c173a8>货到付款</a><span style="color:#999;" data-v-35c173a8>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-35c173a8>金额明细</h3>',5),b={class:"box-body"},y={class:"total"},k=d((()=>(0,s._)("dt",null,"商品件数：",-1))),w=d((()=>(0,s._)("dt",null,"商品总价：",-1))),x=d((()=>(0,s._)("dt",null,[(0,s.Uk)("运"),(0,s._)("i"),(0,s.Uk)("费：")],-1))),C=d((()=>(0,s._)("dt",null,"应付总额：",-1))),D={class:"price"},U={class:"submit"};function A(e,t,a,d,A,I){const z=(0,s.up)("XtxBreadItem"),Z=(0,s.up)("XtxBread"),W=(0,s.up)("CheckOutAddress"),j=(0,s.up)("XtxButton");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",i,[(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s.Wm)(z,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首页")])),_:1}),(0,s.Wm)(z,{to:"/cart"},{default:(0,s.w5)((()=>[(0,s.Uk)("购物车")])),_:1}),(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s.Uk)("填写订单")])),_:1})])),_:1}),d.checkoutInfo?((0,s.wg)(),(0,s.iD)("div",n,[r,(0,s._)("div",c,[(0,s.Wm)(W,{onChange:d.changeAddress,list:d.checkoutInfo.userAddresses},null,8,["onChange","list"])]),u,(0,s._)("div",p,[(0,s._)("table",v,[_,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.checkoutInfo.goods,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,[(0,s._)("a",m,[(0,s._)("img",{src:e.picture,alt:""},null,8,f),(0,s._)("div",h,[(0,s._)("p",null,(0,l.zw)(e.name),1),(0,s._)("p",null,(0,l.zw)(e.attrsText),1)])])]),(0,s._)("td",null,"¥"+(0,l.zw)(e.payPrice),1),(0,s._)("td",null,(0,l.zw)(e.count),1),(0,s._)("td",null,"¥"+(0,l.zw)(e.totalPrice),1),(0,s._)("td",null,"¥"+(0,l.zw)(e.totalPayPrice),1)])))),128))])])]),g,(0,s._)("div",b,[(0,s._)("div",y,[(0,s._)("dl",null,[k,(0,s._)("dd",null,(0,l.zw)(d.checkoutInfo.summary.goodsCount)+"件",1)]),(0,s._)("dl",null,[w,(0,s._)("dd",null,"¥"+(0,l.zw)(d.checkoutInfo.summary.totalPrice),1)]),(0,s._)("dl",null,[x,(0,s._)("dd",null,"¥"+(0,l.zw)(d.checkoutInfo.summary.postFee),1)]),(0,s._)("dl",null,[C,(0,s._)("dd",D,"¥"+(0,l.zw)(d.checkoutInfo.summary.totalPayPrice),1)])])]),(0,s._)("div",U,[(0,s.Wm)(j,{onClick:d.submitOrder,type:"primary"},{default:(0,s.w5)((()=>[(0,s.Uk)("提交订单")])),_:1},8,["onClick"])])])):(0,s.kq)("",!0)])])}a(7658);const I=e=>((0,s.dD)("data-v-4cb0b387"),e=e(),(0,s.Cn)(),e),z={class:"checkout-address"},Z={class:"text"},W={key:0,class:"none"},j={key:1},q=I((()=>(0,s._)("span",null,[(0,s.Uk)("收"),(0,s._)("i"),(0,s.Uk)("货"),(0,s._)("i"),(0,s.Uk)("人：")],-1))),H=I((()=>(0,s._)("span",null,"联系方式：",-1))),L=I((()=>(0,s._)("span",null,"收货地址：",-1))),E={class:"action"},P=["onClick"],$=I((()=>(0,s._)("span",null,[(0,s.Uk)("收"),(0,s._)("i"),(0,s.Uk)("货"),(0,s._)("i"),(0,s.Uk)("人：")],-1))),O=I((()=>(0,s._)("span",null,"联系方式：",-1))),S=I((()=>(0,s._)("span",null,"收货地址：",-1)));function X(e,t,a,d,o,i){const n=(0,s.up)("XtxButton"),r=(0,s.up)("xtx-dialog"),c=(0,s.up)("addressEdit");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",z,[(0,s._)("div",Z,[d.showAddress?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",W,"您需要先添加收货地址才可提交订单。")),d.showAddress?((0,s.wg)(),(0,s.iD)("ul",j,[(0,s._)("li",null,[q,(0,s.Uk)((0,l.zw)(d.showAddress.receiver),1)]),(0,s._)("li",null,[H,(0,s.Uk)((0,l.zw)(d.showAddress.contact.replace(/^(\d{3})\d{4}(\d{3})/,"$1****$2")),1)]),(0,s._)("li",null,[L,(0,s.Uk)((0,l.zw)(d.showAddress.fullLocation.replace(/ /g,"")+d.showAddress.address),1)])])):(0,s.kq)("",!0),d.showAddress?((0,s.wg)(),(0,s.iD)("a",{key:2,onClick:t[0]||(t[0]=e=>d.openAddressEdit(d.showAddress)),href:"javascript:;"},"修改地址")):(0,s.kq)("",!0)]),(0,s._)("div",E,[(0,s.Wm)(n,{class:"btn",onClick:t[1]||(t[1]=e=>d.openDialog())},{default:(0,s.w5)((()=>[(0,s.Uk)("切换地址")])),_:1}),(0,s.Wm)(n,{class:"btn",onClick:t[2]||(t[2]=e=>d.openAddressEdit())},{default:(0,s.w5)((()=>[(0,s.Uk)("添加地址")])),_:1})])]),(0,s.Wm)(r,{title:"切换收货地址",visiable:d.visiableDialog,"onUpdate:visiable":t[5]||(t[5]=e=>d.visiableDialog=e)},{footer:(0,s.w5)((()=>[(0,s.Wm)(n,{onClick:t[3]||(t[3]=e=>d.visiableDialog=!1),type:"gray",style:{"margin-right":"20px"}},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{onClick:t[4]||(t[4]=e=>d.confirmAddress()),type:"primary"},{default:(0,s.w5)((()=>[(0,s.Uk)("确认")])),_:1})])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.list,(e=>((0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["text item",{active:d.selectedAddress&&e.id===d.selectedAddress.id}]),onClick:t=>d.selectedAddress=e,key:e.id},[(0,s._)("ul",null,[(0,s._)("li",null,[$,(0,s.Uk)((0,l.zw)(e.receiver),1)]),(0,s._)("li",null,[O,(0,s.Uk)((0,l.zw)(e.contact),1)]),(0,s._)("li",null,[S,(0,s.Uk)((0,l.zw)(e.fullLocation.replace(/ /g,"")+e.address),1)])])],10,P)))),128))])),_:1},8,["visiable"]),(0,s.Wm)(c,{onOnSuccess:d.successHandler,ref:"addressEdit"},null,8,["onOnSuccess"])],64)}a(541);var T=a(4870),V=a(7191),B=a(9242);const Y=e=>((0,s.dD)("data-v-30e3167a"),e=e(),(0,s.Cn)(),e),N={class:"address-edit"},K={class:"xtx-form"},R={class:"xtx-form-item"},J=Y((()=>(0,s._)("div",{class:"label"},"收货人：",-1))),M={class:"field"},F={class:"xtx-form-item"},G=Y((()=>(0,s._)("div",{class:"label"},"手机号：",-1))),Q={class:"field"},ee={class:"xtx-form-item"},te=Y((()=>(0,s._)("div",{class:"label"},"地区：",-1))),ae={class:"field"},se={class:"xtx-form-item"},le=Y((()=>(0,s._)("div",{class:"label"},"详细地址：",-1))),de={class:"field"},oe={class:"xtx-form-item"},ie=Y((()=>(0,s._)("div",{class:"label"},"邮政编码：",-1))),ne={class:"field"},re={class:"xtx-form-item"},ce=Y((()=>(0,s._)("div",{class:"label"},"地址标签：",-1))),ue={class:"field"};function pe(e,t,a,l,d,o){const i=(0,s.up)("XtxCity"),n=(0,s.up)("XtxButton"),r=(0,s.up)("XtxDialog");return(0,s.wg)(),(0,s.j4)(r,{title:(l.formData.id?"编辑":"添加")+"收货地址",visiable:l.visiableDialog,"onUpdate:visiable":t[6]||(t[6]=e=>l.visiableDialog=e)},{footer:(0,s.w5)((()=>[(0,s.Wm)(n,{type:"gray",onClick:t[5]||(t[5]=e=>l.visiableDialog=!1),style:{"margin-right":"20px"}},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1}),(0,s.Wm)(n,{type:"primary",onClick:l.submit},{default:(0,s.w5)((()=>[(0,s.Uk)("确认")])),_:1},8,["onClick"])])),default:(0,s.w5)((()=>[(0,s._)("div",N,[(0,s._)("div",K,[(0,s._)("div",R,[J,(0,s._)("div",M,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.formData.receiver=e),class:"input",placeholder:"请输入收货人"},null,512),[[B.nr,l.formData.receiver]])])]),(0,s._)("div",F,[G,(0,s._)("div",Q,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.contact=e),class:"input",placeholder:"请输入手机号"},null,512),[[B.nr,l.formData.contact]])])]),(0,s._)("div",ee,[te,(0,s._)("div",ae,[(0,s.Wm)(i,{fullLocation:l.formData.fullLocation,onChange:l.changeCity,placeholder:"请选择所在地区"},null,8,["fullLocation","onChange"])])]),(0,s._)("div",se,[le,(0,s._)("div",de,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.address=e),class:"input",placeholder:"请输入详细地址"},null,512),[[B.nr,l.formData.address]])])]),(0,s._)("div",oe,[ie,(0,s._)("div",ne,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.postalCode=e),class:"input",placeholder:"请输入邮政编码"},null,512),[[B.nr,l.formData.postalCode]])])]),(0,s._)("div",re,[ce,(0,s._)("div",ue,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.addressTags=e),class:"input",placeholder:"请输入地址标签，逗号分隔"},null,512),[[B.nr,l.formData.addressTags]])])])])])])),_:1},8,["title","visiable"])}var ve=a(8391),_e=a(7535),me={name:"AddressEdit",setup(e,{emit:t}){const a=(0,T.iH)(!1),s=(0,T.qj)({id:"",receiver:"",contact:"",provinceCode:"",cityCode:"",countyCode:"",address:"",postalCode:"",addressTags:"",isDefault:0,fullLocation:""}),l=e=>{s.provinceCode=e.provinceCode,s.cityCode=e.cityCode,s.countyCode=e.countyCode,s.fullLocation=e.fullLocation},d=e=>{if(e)for(const t in s)s[t]=e[t];else for(const t in s)"isDefault"!==t&&(s[t]="");a.value=!0},o=()=>{s.id?(0,_e.Yb)(s).then((e=>{(0,ve.Z)({text:"修改收货地址成功",type:"success"}),a.value=!1,t("on-success",s)})):(0,_e.y$)(s).then((e=>{(0,ve.Z)({text:"添加收货地址成功",type:"success"}),s.id=e.result.id,a.value=!1,t("on-success",s)})).catch((e=>{(0,ve.Z)({text:e.response.data.message,type:"error"})}))};return{visiableDialog:a,open:d,formData:s,changeCity:l,submit:o}}},fe=a(89);const he=(0,fe.Z)(me,[["render",pe],["__scopeId","data-v-30e3167a"]]);var ge=he,be={components:{xtxDialog:V["default"],addressEdit:ge},name:"CheckoutAddress",emits:["change"],props:{list:{type:Array,default:()=>[]}},setup(e,{emit:t}){const a=(0,T.iH)(null);if(e.list.length){const t=e.list.find((e=>1===e.isDefault));a.value=t||e.list[0]}const s=(0,T.iH)(!1);t("change",a.value&&a.value.id);const l=()=>{s.value=!0,o.value=null},d=()=>{s.value=!1,a.value=o.value,t("change",a.value&&a.value.id)},o=(0,T.iH)(null),i=(0,T.iH)(null),n=e=>{i.value.open(e)},r=t=>{const a=e.list.find((e=>e.id===t.id));if(a)for(const e in a)a[e]=t[e];else{const a=JSON.stringify(t);e.list.unshift(JSON.parse(a))}};return{showAddress:a,visiableDialog:s,selectedAddress:o,openDialog:l,confirmAddress:d,openAddressEdit:n,addressEdit:i,successHandler:r}}};const ye=(0,fe.Z)(be,[["render",X],["__scopeId","data-v-4cb0b387"]]);var ke=ye,we=a(2483),xe={name:"XtxPayCheckoutPage",components:{CheckOutAddress:ke},setup(){const e=(0,T.iH)(null),t=(0,we.yj)();t.query.orderId?(console.log("route.query.orderId :",t.query.orderId),(0,_e.li)(t.query.orderId).then((t=>{e.value=t.result,console.log("dataaa :",t),a.goods=t.result.goods.map((({skuId:e,count:t})=>({skuId:e,count:t})))}))):(0,_e.RA)().then((t=>{e.value=t.result,console.log("data :",t),a.goods=e.value.goods.map((e=>({skuId:e.skuId,count:e.count})))})).catch((e=>console.log("err :",e)));const a=(0,T.qj)({addressId:null,deliveryTimeType:1,payType:1,buyerMessage:"",goods:[]}),s=e=>{a.addressId=e},l=(0,we.tv)(),d=()=>{if(!a.addressId)return Message({text:"请选择收货地址"});(0,_e.LV)(a).then((e=>{l.push({path:"/member/pay",query:{id:e.result.id}})}))};return{checkoutInfo:e,changeAddress:s,submitOrder:d}}};const Ce=(0,fe.Z)(xe,[["render",A],["__scopeId","data-v-35c173a8"]]);var De=Ce}}]);