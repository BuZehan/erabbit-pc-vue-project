"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[271],{206:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ot}});var r=a(3396),n=a(7139),i=a.p+"static/img/qr.debe6426.jpg";const o=e=>((0,r.dD)("data-v-525b6eab"),e=e(),(0,r.Cn)(),e),l={class:"login-section"},s={class:"wrapper"},u={key:1,class:"qrcode-box"},c=o((()=>(0,r._)("img",{src:i,alt:""},null,-1))),d=o((()=>(0,r._)("p",null,[(0,r.Uk)("打开 "),(0,r._)("a",{href:"javascript:;"},"小兔鲜App"),(0,r.Uk)(" 扫码登录")],-1))),v=[c,d];function f(e,t,a,i,o,c){const d=(0,r.up)("LoginHeader"),f=(0,r.up)("LoginForm"),m=(0,r.up)("LoginFooter");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Uk)("欢迎登录")])),_:1}),(0,r._)("section",l,[(0,r._)("div",s,[(0,r._)("nav",null,[(0,r._)("a",{onClick:t[0]||(t[0]=e=>i.activeName="account"),class:(0,n.C_)({active:"account"===i.activeName}),href:"javascript:;"},"账户登录",2),(0,r._)("a",{onClick:t[1]||(t[1]=e=>i.activeName="qrcode"),class:(0,n.C_)({active:"qrcode"===i.activeName}),href:"javascript:;"},"扫码登录",2)]),"account"===i.activeName?((0,r.wg)(),(0,r.j4)(f,{key:0},{default:(0,r.w5)((()=>[(0,r.Uk)("表单")])),_:1})):(0,r.kq)("",!0),"qrcode"===i.activeName?((0,r.wg)(),(0,r.iD)("div",u,v)):(0,r.kq)("",!0)])]),(0,r.Wm)(m)],64)}var m=a(4870);const p=e=>((0,r.dD)("data-v-164d6cac"),e=e(),(0,r.Cn)(),e),h={class:"login-header"},y={class:"container"},g={class:"logo"},b={class:"sub"},_=p((()=>(0,r._)("i",{class:"iconfont icon-angle-right"},null,-1))),V=p((()=>(0,r._)("i",{class:"iconfont icon-angle-right"},null,-1)));function w(e,t,a,n,i,o){const l=(0,r.up)("RouterLink");return(0,r.wg)(),(0,r.iD)("header",h,[(0,r._)("div",y,[(0,r._)("h1",g,[(0,r.Wm)(l,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("小兔鲜")])),_:1})]),(0,r._)("h3",b,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r.Wm)(l,{class:"entry",to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)(" 进入网站首页 "),_,V])),_:1})])])}var k={name:"LoginHeader"},F=a(89);const S=(0,F.Z)(k,[["render",w],["__scopeId","data-v-164d6cac"]]);var j=S;const A={class:"login-footer"},O=(0,r.uE)('<div class="container" data-v-d94bd618><p data-v-d94bd618><a href="javascript:;" data-v-d94bd618>关于我们</a><a href="javascript:;" data-v-d94bd618>帮助中心</a><a href="javascript:;" data-v-d94bd618>售后服务</a><a href="javascript:;" data-v-d94bd618>配送与验收</a><a href="javascript:;" data-v-d94bd618>商务合作</a><a href="javascript:;" data-v-d94bd618>搜索推荐</a><a href="javascript:;" data-v-d94bd618>友情链接</a></p><p data-v-d94bd618>CopyRight © 小兔鲜儿</p></div>',1),U=[O];function E(e,t,a,n,i,o){return(0,r.wg)(),(0,r.iD)("footer",A,U)}var D={name:"LoginFooter"};const C=(0,F.Z)(D,[["render",E],["__scopeId","data-v-d94bd618"]]);var M=C;const x=e=>((0,r.dD)("data-v-454bac24"),e=e(),(0,r.Cn)(),e),T={class:"account-box"},q={class:"toggle"},L=x((()=>(0,r._)("i",{class:"iconfont icon-user"},null,-1))),B=x((()=>(0,r._)("i",{class:"iconfont icon-msg"},null,-1))),$={class:"form-item"},I={class:"input"},N=x((()=>(0,r._)("i",{class:"iconfont icon-user"},null,-1))),R={key:0,class:"error"},H=x((()=>(0,r._)("i",{class:"iconfont icon-warning"},null,-1))),P={class:"form-item"},Z={class:"input"},W=x((()=>(0,r._)("i",{class:"iconfont icon-lock"},null,-1))),Y={key:0,class:"error"},z=x((()=>(0,r._)("i",{class:"iconfont icon-warning"},null,-1))),J={class:"form-item"},X={class:"input"},G=x((()=>(0,r._)("i",{class:"iconfont icon-user"},null,-1))),K={key:0,class:"error"},Q=x((()=>(0,r._)("i",{class:"iconfont icon-warning"},null,-1))),ee={class:"form-item"},te={class:"input"},ae=x((()=>(0,r._)("i",{class:"iconfont icon-code"},null,-1))),re={key:0,class:"error"},ne=x((()=>(0,r._)("i",{class:"iconfont icon-warning"},null,-1))),ie={class:"form-item"},oe={class:"agree"},le=x((()=>(0,r._)("span",null,"我已同意",-1))),se=x((()=>(0,r._)("a",{href:"javascript:;"},"《隐私条款》",-1))),ue=x((()=>(0,r._)("span",null,"和",-1))),ce=x((()=>(0,r._)("a",{href:"javascript:;"},"《服务条款》",-1))),de={key:0,class:"error"},ve=x((()=>(0,r._)("i",{class:"iconfont icon-warning"},null,-1))),fe=(0,r.uE)('<div class="action" data-v-454bac24><img src="https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png" alt="" data-v-454bac24><div class="url" data-v-454bac24><a href="javascript:;" data-v-454bac24>忘记密码</a><a href="javascript:;" data-v-454bac24>免费注册</a></div></div>',1);function me(e,t,a,i,o,l){const s=(0,r.up)("Field"),u=(0,r.up)("Form");return(0,r.wg)(),(0,r.iD)("div",T,[(0,r._)("div",q,[i.isMsgLogin?((0,r.wg)(),(0,r.iD)("a",{key:0,onClick:t[0]||(t[0]=e=>i.isMsgLogin=!1),href:"javascript:;"},[L,(0,r.Uk)(" 使用账号登录 ")])):((0,r.wg)(),(0,r.iD)("a",{key:1,onClick:t[1]||(t[1]=e=>i.isMsgLogin=!0),href:"javascript:;"},[B,(0,r.Uk)(" 使用短信登录 ")]))]),(0,r.Wm)(u,{class:"form",ref:"formCom","validation-schema":i.schema,autocomplete:"off"},{default:(0,r.w5)((({errors:e})=>[i.isMsgLogin?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",J,[(0,r._)("div",X,[G,(0,r.Wm)(s,{type:"text",name:"mobile",class:(0,n.C_)({error:e.mobile}),modelValue:i.form.mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.mobile=e),placeholder:"请输入手机号 测试号132 4105 1259"},null,8,["class","modelValue"])]),e.mobile?((0,r.wg)(),(0,r.iD)("div",K,[Q,(0,r.Uk)((0,n.zw)(e.mobile),1)])):(0,r.kq)("",!0)]),(0,r._)("div",ee,[(0,r._)("div",te,[ae,(0,r.Wm)(s,{name:"code",type:"text",class:(0,n.C_)({error:e.code}),modelValue:i.form.code,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.code=e),placeholder:"验证码 测试123456"},null,8,["class","modelValue"]),(0,r._)("span",{class:"code",onClick:t[6]||(t[6]=(...e)=>i.send&&i.send(...e))},(0,n.zw)(0===i.time?"发送验证码":`${i.time}`),1)]),e.code?((0,r.wg)(),(0,r.iD)("div",re,[ne,(0,r.Uk)((0,n.zw)(e.code),1)])):(0,r.kq)("",!0)])],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",$,[(0,r._)("div",I,[N,(0,r.Wm)(s,{name:"account",class:(0,n.C_)({error:e.account}),modelValue:i.form.account,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.account=e),type:"text",placeholder:"请输入用户名"},null,8,["class","modelValue"])]),e.account?((0,r.wg)(),(0,r.iD)("div",R,[H,(0,r.Uk)((0,n.zw)(e.account),1)])):(0,r.kq)("",!0)]),(0,r._)("div",P,[(0,r._)("div",Z,[W,(0,r.Wm)(s,{name:"password",class:(0,n.C_)({error:e.password}),modelValue:i.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.password=e),type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),e.password?((0,r.wg)(),(0,r.iD)("div",Y,[z,(0,r.Uk)((0,n.zw)(e.password),1)])):(0,r.kq)("",!0)])],64)),(0,r._)("div",ie,[(0,r._)("div",oe,[(0,r.Wm)(s,{as:"XtxCheckbox",name:"isAgree",modelValue:i.form.isAgree,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.isAgree=e)},null,8,["modelValue"]),le,se,ue,ce]),e.isAgree?((0,r.wg)(),(0,r.iD)("div",de,[ve,(0,r.Uk)("点击同意")])):(0,r.kq)("",!0)]),(0,r._)("a",{href:"javascript:;",class:"btn",onClick:t[8]||(t[8]=(...e)=>i.login&&i.login(...e))},"登录")])),_:1},8,["validation-schema"]),fe])}a(7658);var pe=a(3430);
/**
  * vee-validate v4.0.3
  * (c) 2020 Abdelrahman Awad
  * @license MIT
  */
function he(e){return"function"===typeof e}const ye=e=>null!==e&&!!e&&"object"===typeof e&&!Array.isArray(e),ge={};function be(e){return ge[e]}function _e(e){return he(e)&&!!e.__locatorRef}function Ve(e){return["input","textarea","select"].includes(e)}function we(e,t){return Ve(e)&&"file"===t}function ke(e){return!!e&&he(e.validate)}function Fe(e){return"checkbox"===e||"radio"===e}function Se(e){return Number(e)>=0}function je(e){return Array.isArray(e)?0===e.length:ye(e)&&0===Object.keys(e).length}function Ae(e){return/^\[.+\]$/i.test(e)}function Oe(e){return Ae(e)?e.replace(/\[|\]/gi,""):e}function Ue(e,t){if(e)return Ae(t)?e[Oe(t)]:t.split(/\.|\[(\d+)\]/).filter(Boolean).reduce(((e,t)=>{if(e&&t in e)return e[t]}),e)}function Ee(e,t,a){if(Ae(t))return void(e[Oe(t)]=a);const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let i=0;i<r.length;i++){if(i===r.length-1)return void(n[r[i]]=a);r[i]in n||(n[r[i]]=Se(r[i+1])?[]:{}),n=n[r[i]]}}function De(e,t){Array.isArray(e)&&Se(t)?e.splice(Number(t),1):delete e[t]}function Ce(e,t){if(Ae(t))return void delete e[Oe(t)];const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let i=0;i<a.length;i++){if(i===a.length-1){De(r,a[i]);break}if(!(a[i]in r))break;r=r[a[i]]}const n=a.map(((t,r)=>Ue(e,a.slice(0,r).join("."))));for(let i=n.length-1;i>=0;i--)je(n[i])&&(0!==i?De(n[i-1],a[i-1]):De(e,a[0]))}function Me(e){return Object.keys(e)}function xe(e,t){const a=(0,r.FN)();return(0,r.f3)(e,(null===a||void 0===a?void 0:a.provides[e])||t)}const Te=e=>!!e&&(!!("undefined"!==typeof Event&&he(Event)&&e instanceof Event)||!(!e||!e.srcElement));function qe(e){if(!Te(e))return e;const t=e.target;return Fe(t.type)&&"_value"in t?t._value:"file"===t.type&&t.files?Array.from(t.files):t.value}function Le(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?he(e)||ke(e)||ye(e)&&e._$$isNormalized?e:ye(e)?Object.keys(e).reduce(((t,a)=>{const r=Be(e[a]);return!1!==e[a]&&(t[a]=$e(r)),t}),t):"string"!==typeof e?t:e.split("|").reduce(((e,t)=>{const a=Ie(t);return a.name?(e[a.name]=$e(a.params),e):e}),t):t}function Be(e){return!0===e?[]:Array.isArray(e)||ye(e)?e:[e]}function $e(e){const t=e=>"string"===typeof e&&"@"===e[0]?Ne(e.slice(1)):e;return Array.isArray(e)?e.map(t):Object.keys(e).reduce(((a,r)=>(a[r]=t(e[r]),a)),{})}const Ie=e=>{let t=[];const a=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:a,params:t}};function Ne(e){const t=t=>{const a=t[e];return a};return t.__locatorRef=e,t}function Re(e){return Array.isArray(e)?e.filter(_e):Object.keys(e).filter((t=>_e(e[t]))).map((t=>e[t]))}const He=(e,t)=>e.slots.default?e.slots.default(t):e.slots.default,Pe={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Ze=Object.assign({},Pe);const We=()=>Ze;async function Ye(e,t,a={}){const r=null===a||void 0===a?void 0:a.bails,n={name:(null===a||void 0===a?void 0:a.name)||"{field}",rules:Le(t),bails:null===r||void 0===r||r,formData:(null===a||void 0===a?void 0:a.values)||{}},i=await ze(n,e),o=i.errors;return{errors:o}}async function ze(e,t){if(ke(e.rules))return Je(e,t);if(he(e.rules)){const a=await e.rules(t,{field:e.name,form:e.formData}),r="string"!==typeof a&&a,n="string"===typeof a?a:Ge({field:e.name,value:t,form:e.formData});return{errors:r?[]:[n]}}const a=[],r=Object.keys(e.rules),n=r.length;for(let i=0;i<n;i++){const n=r[i],o=await Xe(e,t,{name:n,params:e.rules[n]});if(o.error&&(a.push(o.error),e.bails))return{errors:a}}return{errors:a}}async function Je(e,t){const a=await e.rules.validate(t,{abortEarly:e.bails}).then((()=>[])).catch((e=>{if("ValidationError"===e.name)return e.errors;throw e}));return{errors:a}}async function Xe(e,t,a){const r=be(a.name);if(!r)throw new Error(`No such validator '${a.name}' exists.`);const n=Ke(a.params,e.formData),i={field:e.name,value:t,form:e.formData,rule:a},o=await r(t,n,i);return"string"===typeof o?{error:o}:{error:o?void 0:Ge(i)}}function Ge(e){const t=We().generateMessage;return t?t(e):"Field is invalid"}function Ke(e,t){const a=e=>_e(e)?e(t):e;return Array.isArray(e)?e.map(a):Object.keys(e).reduce(((t,r)=>(t[r]=a(e[r]),t)),{})}const Qe=Symbol("vee-validate-form"),et=Symbol("vee-validate-form-errors"),tt=Symbol("vee-validate-form-initial-values");let at=0;function rt(e,t,a){const n=at>=Number.MAX_SAFE_INTEGER?0:++at,{initialValue:i,validateOnMount:o,bails:l,type:s,valueProp:u,label:c,validateOnValueUpdate:d}=nt((0,m.SU)(e),a),v=xe(Qe),{meta:f,errors:p,handleBlur:h,handleInput:y,resetValidationState:g,setValidationState:b,value:_,checked:V}=it({name:e,initValue:(0,m.SU)(i),form:v,type:s,valueProp:u}),w=lt(null===v||void 0===v?void 0:v.schema,(0,m.SU)(e)),k=(0,r.Fl)((()=>Le(w||(0,m.SU)(t)))),F=async()=>{var t;let a;return f.pending=!0,a=v&&v.validateSchema?(await v.validateSchema())[(0,m.SU)(e)]:await Ye(_.value,k.value,{name:(0,m.SU)(c)||(0,m.SU)(e),values:null!==(t=null===v||void 0===v?void 0:v.values)&&void 0!==t?t:{},bails:l}),f.pending=!1,b(a)},S=e=>{var t,a;if(!V||V.value!==(null===(a=null===(t=e)||void 0===t?void 0:t.target)||void 0===a?void 0:a.checked))return _.value=qe(e),f.dirty=!0,d?void 0:F()};o&&(0,r.bv)(F);const j=(0,r.Fl)((()=>p.value[0]));function A(e){f.touched=e}function O(e){f.dirty=e}let U;function E(){d&&(U=(0,r.YP)(_,F,{deep:!0}))}function D(e){null===U||void 0===U||U(),g(e),E()}E();const C={fid:n,name:e,value:_,meta:f,errors:p,errorMessage:j,type:s,valueProp:u,checked:V,idx:-1,resetField:D,handleReset:()=>D(),validate:F,handleChange:S,handleBlur:h,handleInput:y,setValidationState:b,setTouched:A,setDirty:O};if((0,m.dq)(t)&&"function"!==typeof(0,m.SU)(t)&&(0,r.YP)(t,F,{deep:!0}),!v)return C;v.register(C),(0,r.Jd)((()=>{v.unregister(C)}));const M=(0,r.Fl)((()=>{const e=k.value;return!e||he(e)||he(e.validate)?[]:Object.keys(e).reduce(((e,t)=>{const a=Re(k.value[t]).map((e=>e.__locatorRef));return e.push(...a),e}),[])}));return(0,r.m0)((()=>{M.value.length&&M.value.forEach((e=>{if(e in v.values&&f.dirty)return F()}))})),C}function nt(e,t){const a=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0});return t?Object.assign(Object.assign({},a()),t||{}):a()}function it({name:e,initValue:t,form:a,type:n,valueProp:i}){var o;const l=(0,m.iH)([]),s=xe(tt,void 0),u=null!==(o=Ue((0,m.SU)(s),(0,m.SU)(e)))&&void 0!==o?o:t,{resetMeta:c,meta:d}=ot(u),v=st(u,e,a);Fe(n)&&u&&(v.value=u);const f=Fe(n)?(0,r.Fl)((()=>Array.isArray(v.value)?v.value.includes((0,m.SU)(i)):(0,m.SU)(i)===v.value)):void 0;(void 0===f||f.value)&&(v.value=u);const p=()=>{d.touched=!0},h=e=>{Fe(n)||(v.value=qe(e)),d.dirty=!0};function y(e){return l.value=e.errors,d.valid=!e.errors.length,e}function g(a){var r;v.value=a&&"value"in a?a.value:null!==(r=Ue((0,m.SU)(s),(0,m.SU)(e)))&&void 0!==r?r:t,l.value=(null===a||void 0===a?void 0:a.errors)||[],c(a)}return{meta:d,errors:l,setValidationState:y,resetValidationState:g,handleBlur:p,handleInput:h,value:v,checked:f}}function ot(e){const t=()=>({touched:!1,dirty:!1,valid:!1,pending:!1,initialValue:e}),a=(0,m.qj)(t());function r(e){var r,n,i;const o=t();a.pending=o.pending,a.touched=null!==(r=null===e||void 0===e?void 0:e.touched)&&void 0!==r?r:o.touched,a.dirty=null!==(n=null===e||void 0===e?void 0:e.dirty)&&void 0!==n?n:o.dirty,a.initialValue=null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:o.initialValue}return{meta:a,resetMeta:r}}function lt(e,t){if(e)return e[t]}function st(e,t,a){if(!a)return(0,m.iH)(e);Ee(a.values,(0,m.SU)(t),e);const n=(0,r.Fl)({get(){return Ue(a.values,(0,m.SU)(t))},set(e){a.setFieldValue((0,m.SU)(t),e)}});return n}const ut=(0,r.aZ)({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:null},validateOnMount:{type:Boolean,default:!1},bails:{type:Boolean,default:()=>We().bails},label:{type:String,default:void 0}},setup(e,t){const a=(0,m.Vh)(e,"rules"),n=(0,m.Vh)(e,"name"),i=(0,m.Vh)(e,"label"),{errors:o,value:l,errorMessage:s,validate:u,handleChange:c,handleBlur:d,handleInput:v,setDirty:f,setTouched:p,resetField:h,handleReset:y,meta:g,checked:b}=rt(n,a,{validateOnMount:e.validateOnMount,bails:e.bails,type:t.attrs.type,initialValue:Fe(t.attrs.type)||"modelValue"in t.attrs?t.attrs.modelValue:t.attrs.value,valueProp:t.attrs.value,label:i,validateOnValueUpdate:!1});let _=!1;function V(){_=!0,(0,r.Y3)((()=>{_=!1}))}const w="modelValue"in t.attrs?function(e){c(e),t.emit("update:modelValue",l.value)}:c,k="modelValue"in t.attrs?function(e){v(e),t.emit("update:modelValue",l.value)}:v,{validateOnInput:F,validateOnChange:S,validateOnBlur:j,validateOnModelUpdate:A}=We(),O=[d,t.attrs.onBlur,j?u:void 0].filter(Boolean),U=[k,V,F?w:void 0,t.attrs.onInput].filter(Boolean),E=[k,V,S?w:void 0,t.attrs.onChange].filter(Boolean),D=()=>{const a={name:e.name,onBlur:O,onInput:U,onChange:E};return A&&(a["onUpdate:modelValue"]=[w,V]),Fe(t.attrs.type)&&b?a.checked=b.value:a.value=l.value,we(ct(e,t),t.attrs.type)&&delete a.value,{field:a,meta:g,errors:o.value,errorMessage:s.value,validate:u,resetField:h,handleChange:w,handleInput:k,handleReset:y,handleBlur:d,setDirty:f,setTouched:p}};return()=>{const a=(0,r.LL)(ct(e,t)),n=D();"modelValue"in t.attrs&&String(t.attrs.modelValue)!==String(l.value)&&!_&&(0,r.Y3)((()=>{c(t.attrs.modelValue)}));const i=He(t,n);return a?(0,r.h)(a,Object.assign(Object.assign({},t.attrs),n.field),i):i}}});function ct(e,t){let a=e.as||"";return e.as||t.slots.default||(a="input"),a}function dt(e){const t=(0,m.iH)([]),a=(0,m.iH)(!1),n=(0,r.Fl)((()=>t.value.reduce(((e,t)=>{if(!e[t.name])return e[t.name]=t,t.idx=-1,e;if(!Array.isArray(e[t.name])){const a=e[t.name];a.idx=0,e[t.name]=[a]}return t.idx=e[t.name].length,e[t.name].push(t),e}),{}))),i=(0,m.qj)({}),o={},l=(0,r.Fl)((()=>t.value.reduce(((e,t)=>{let a;if(Array.isArray(n.value[t.name])){const e=n.value[t.name];a=(0,m.SU)((e.find((e=>(0,m.SU)(e.checked)))||t).errorMessage)}else a=(0,m.SU)(t.errorMessage);return a&&(e[t.name]=a),e}),{}))),{initialValues:s,setInitialValues:u}=mt(n,i,null===e||void 0===e?void 0:e.initialValues),c=vt(t,s);function d(e,t){const a=n.value[e];a&&(Array.isArray(a)?a.forEach((e=>{e.setValidationState({errors:t?[t]:[]})})):a.setValidationState({errors:t?[t]:[]}))}function v(e){Me(e).forEach((t=>{d(t,e[t])}))}function f(e,t){var a;const r=n.value[e];if(Array.isArray(r)&&"checkbox"===(null===(a=r[0])||void 0===a?void 0:a.type)&&!Array.isArray(t)){const a=Ue(i,e),n=Array.isArray(a)?[...a]:[],l=n.indexOf(t);return l>=0?n.splice(l,1):n.push(t),Ee(i,e,n),void r.forEach((e=>{o[e.fid]=n}))}let l=t;"checkbox"===(null===r||void 0===r?void 0:r.type)&&(l=Ue(i,e)===t?void 0:t),Ee(i,e,l),r&&(o[r.fid]=l)}function p(e){Me(e).forEach((t=>{f(t,e[t])}))}function h(e,t){const a=n.value[e];a&&(Array.isArray(a)?a.forEach((e=>e.setTouched(t))):a.setTouched(t))}function y(e){Me(e).forEach((t=>{h(t,!!e[t])}))}function g(e,t){const a=n.value[e];a&&(Array.isArray(a)?a.forEach((e=>e.setDirty(t))):a.setDirty(t))}function b(e){Me(e).forEach((t=>{g(t,!!e[t])}))}const _=e=>{(null===e||void 0===e?void 0:e.values)&&u(e.values),t.value.forEach((e=>e.resetField())),(null===e||void 0===e?void 0:e.dirty)&&b(e.dirty),(null===e||void 0===e?void 0:e.touched)&&y(e.touched),(null===e||void 0===e?void 0:e.errors)&&v(e.errors)};function V(e){t.value.push(e),(0,m.dq)(e.name)&&(0,r.YP)(e.name,(t=>{f(t,o[e.fid])}),{flush:"post"})}function w(e){var a,n;const l=t.value.indexOf(e);if(-1===l)return;t.value.splice(l,1);const s=e.fid;(0,r.Y3)((()=>{delete o[s]}));const u=(0,m.SU)(e.name);if(-1===e.idx)return void Ce(i,u);const c=null===(n=null===(a=Ue(i,u))||void 0===a?void 0:a.indexOf)||void 0===n?void 0:n.call(a,(0,m.SU)(e.valueProp));void 0!==c?-1!==c&&(Array.isArray(i[u])?Ce(i,`${u}.${c}`):Ce(i,u)):Ce(i,u)}const k={register:V,unregister:w,fields:n,values:i,schema:null===e||void 0===e?void 0:e.validationSchema,validateSchema:ke(null===e||void 0===e?void 0:e.validationSchema)?(e=!1)=>ft(k,e):void 0,setFieldValue:f,setValues:p,setErrors:v,setFieldError:d,setFieldTouched:h,setTouched:y,setFieldDirty:g,setDirty:b,resetForm:_},F=async()=>{if(k.validateSchema)return k.validateSchema(!0).then((e=>Object.keys(e).every((t=>!e[t].errors.length))));const e=await Promise.all(t.value.map((e=>e.validate())));return e.every((e=>!e.errors.length))},S=(0,r.Fl)((()=>t.value.reduce(((e,t)=>(Ee(e,t.name,(0,m.SU)(t.value)),e)),{}))),j=e=>function(t){return t instanceof Event&&(t.preventDefault(),t.stopPropagation()),a.value=!0,F().then((a=>{if(a&&"function"===typeof e)return e(S.value,{evt:t,setDirty:b,setFieldDirty:g,setErrors:v,setFieldError:d,setTouched:y,setFieldTouched:h,setValues:p,setFieldValue:f,resetForm:_})})).then((()=>{a.value=!1}),(e=>{throw a.value=!1,e}))},A=j(((e,{evt:t})=>{var a;t&&(null===(a=null===t||void 0===t?void 0:t.target)||void 0===a||a.submit())}));return(0,r.bv)((()=>{(null===e||void 0===e?void 0:e.initialErrors)&&v(e.initialErrors),(null===e||void 0===e?void 0:e.initialDirty)&&b(e.initialDirty),(null===e||void 0===e?void 0:e.initialTouched)&&y(e.initialTouched),(null===e||void 0===e?void 0:e.validateOnMount)&&F()})),(0,r.JJ)(Qe,k),(0,r.JJ)(et,l),{errors:l,meta:c,values:i,validate:F,isSubmitting:a,handleReset:()=>_(),resetForm:_,handleSubmit:j,submitForm:A,setFieldError:d,setErrors:v,setFieldValue:f,setValues:p,setFieldTouched:h,setTouched:y,setFieldDirty:g,setDirty:b}}function vt(e,t){const a={valid:"every",dirty:"some",touched:"some",pending:"some"};return(0,r.Fl)((()=>{const r=Me(a).reduce(((t,r)=>{const n=a[r];return t[r]=e.value[n]((e=>e.meta[r])),t}),{});return Object.assign({initialValues:(0,m.SU)(t)},r)}))}async function ft(e,t=!1){const a=await e.schema.validate(e.values,{abortEarly:!1}).then((()=>[])).catch((e=>{if("ValidationError"!==e.name)throw e;return e.inner||[]})),r=e.fields.value,n=a.reduce(((e,t)=>(e[t.path]=t,e)),{}),i=Me(r).reduce(((e,a)=>{const i=r[a],o=(n[a]||{errors:[]}).errors,l={errors:o};e[a]=l;const s=Array.isArray(i),u=s?i.some((e=>e.meta.dirty)):i.meta.dirty;return t||u?s?(i.forEach((e=>e.setValidationState(l))),e):(i.setValidationState(l),e):e}),{});return i}function mt(e,t,a){const n=(0,m.iH)((0,m.SU)(a)||{}),i=(0,r.Fl)((()=>n.value));function o(a,r=!1){if(n.value=Object.assign(Object.assign({},n.value),a),!r)return;const i=e=>e.meta.dirty||e.meta.touched;Me(e.value).forEach((a=>{const r=e.value[a],o=Array.isArray(r)?r.some(i):i(r);if(o)return;const l=Ue(n.value,a);Ee(t,a,l)}))}return(0,m.dq)(a)&&(0,r.YP)(a,(e=>{o(e,!0)}),{deep:!0}),(0,r.JJ)(tt,i),{initialValues:i,setInitialValues:o}}const pt=(0,r.aZ)({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialDirty:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1}},setup(e,t){const a=(0,m.Vh)(e,"initialValues"),{errors:n,validate:i,handleReset:o,resetForm:l,values:s,meta:u,isSubmitting:c,handleSubmit:d,submitForm:v,setErrors:f,setFieldError:p,setFieldValue:h,setValues:y,setFieldDirty:g,setDirty:b,setFieldTouched:_,setTouched:V}=dt({validationSchema:e.validationSchema,initialValues:a,initialErrors:e.initialErrors,initialTouched:e.initialTouched,initialDirty:e.initialDirty,validateOnMount:e.validateOnMount}),w=t.attrs.onSubmit?d(t.attrs.onSubmit):v;function k(){o(),"function"===typeof t.attrs.onReset&&t.attrs.onReset()}function F(e,t){const a="function"!==typeof e||t?t:e;return d(a)(e)}return function(){"setErrors"in this||(this.setFieldError=p,this.setErrors=f,this.setFieldValue=h,this.setValues=y,this.setFieldDirty=g,this.setDirty=b,this.setFieldTouched=_,this.setTouched=V,this.resetForm=l,this.validate=i);const a=He(t,{meta:u.value,errors:n.value,values:s,isSubmitting:c.value,validate:i,handleSubmit:F,handleReset:o,submitForm:v,setErrors:f,setFieldError:p,setFieldValue:h,setValues:y,setFieldDirty:g,setDirty:b,setFieldTouched:_,setTouched:V,resetForm:l});if(!e.as)return a;const d="form"===e.as?{novalidate:!0}:{};return(0,r.h)("form"===e.as?e.as:(0,r.LL)(e.as),Object.assign(Object.assign(Object.assign({},d),t.attrs),{onSubmit:w,onReset:k}),a)}}});(0,r.aZ)({props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){const a=(0,r.f3)(et,void 0),n=(0,r.Fl)((()=>null===a||void 0===a?void 0:a.value[e.name]));return()=>{const a=He(t,{message:n.value}),i=e.as?(0,r.LL)(e.as):e.as,o=Object.assign({role:"alert"},t.attrs);return!i&&(null===a||void 0===a?void 0:a.length)?a:(null===a||void 0===a?void 0:a.length)?(0,r.h)(i,o,a):(0,r.h)(i||"span",o,n.value)}}});var ht=a(4471);const yt=({account:e,password:t})=>(0,ht.Z)("/login","POST",{account:e,password:t}),gt=({mobile:e,code:t})=>(0,ht.Z)("/login/code","post",{mobile:e,code:t}),bt=e=>(0,ht.Z)("/login/code","get",{mobile:e});var _t={account(e){return e?!!/^[a-zA-Z]\w{4,19}$/.test(e)||"字母开头且5-20个字符":"请输入用户名"},password(e){return e?!!/^\w{6,24}$/.test(e)||"密码是6-24个字符":"请输入密码"},mobile(e){return e?!!/^1[3-9]\d{9}$/.test(e)||"手机号格式错误":"请输入手机号"},code(e){return e?!!/^\d{6}$/.test(e)||"验证码是6个数字":"请输入验证码"},isAgree(e){return!!e||"请勾选同意用户协议"}},Vt=a(2483),wt=a(65),kt={name:"LoginForm",components:{Form:pt,Field:ut},setup(){const e=(0,wt.oR)(),t=(0,Vt.tv)(),a=(0,Vt.yj)(),{proxy:n}=(0,r.FN)(),i=(0,m.iH)(!1),o=(0,m.iH)(null),l=(0,m.qj)({isAgree:!0,account:null,password:null,mobile:null,code:null}),s={account:_t.account,password:_t.password,mobile:_t.mobile,code:_t.code,isAgree:_t.isAgree};(0,r.YP)(i,(()=>{l.isAgree=!0,l.account=null,l.password=null,l.mobile=null,l.code=null,o.value.resetForm()}));const u=async()=>{const r=await o.value.validate();if(r){let r=null;try{if(i.value){const{mobile:e,code:t}=l;r=await gt({mobile:e,code:t})}else{const{account:e,password:t}=l;r=await yt({account:e,password:t})}}catch(s){n.$message({type:"error",text:s.response.data.message}||"登陆失败")}console.log(r);const{id:o,account:u,nickname:c,avatar:d,token:v,mobile:f}=r.result;e.commit("user/setUser",{id:o,account:u,nickname:c,avatar:d,token:v,mobile:f}),n.$message({type:"success",text:"登录成功"}),t.push(a.query.redirectUrl||"/")}},c=(0,m.iH)(0),{pause:d,resume:v}=(0,pe.Zv)((()=>{c.value--,c.value<=0&&d()}),1e3,!1),f=async()=>{const e=s.mobile(l.mobile);!0===e?0===c.value&&(await bt(l.mobile),n.$message({type:"success",text:"发送成功"}),c.value=60,v()):o.value.setFieldError("mobile",e)};return{isMsgLogin:i,form:l,schema:s,formCom:o,login:u,send:f,time:c}}};const Ft=(0,F.Z)(kt,[["render",me],["__scopeId","data-v-454bac24"]]);var St=Ft,jt={name:"Login",components:{LoginHeader:j,LoginFooter:M,LoginForm:St},setup(){const e=(0,m.iH)("account");return{activeName:e}}};const At=(0,F.Z)(jt,[["render",f],["__scopeId","data-v-525b6eab"]]);var Ot=At}}]);